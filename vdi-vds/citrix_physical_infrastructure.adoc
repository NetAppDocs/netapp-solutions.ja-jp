---
sidebar: sidebar 
permalink: vdi-vds/citrix_physical_infrastructure.html 
keywords: NetApp HCI, compute nodes, storage nodes, mnode, mangement node, hybrid cloud control, hcc, aff, mellanox 
summary: この解決策の物理インフラは、 NetApp HCI ストレージノードとコンピューティングノード、ハイブリッドクラウド制御、 NetApp AFF スイッチと Mellanox スイッチで構成されます。 
---
= 物理インフラ
:hardbreaks:
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/




=== NetApp HCI

NetApp HCI はコンピューティングノードまたはストレージノードとして使用できます。ストレージノードのモデルに応じて、クラスタを形成するには少なくとも 2~4 つのノードが必要です。コンピューティングノードの場合、高可用性を確保するには、少なくとも 2 つのノードが必要です。ノードは、必要に応じて一度に 1 つずつ追加することができ、コンピューティング容量やストレージ容量を増やすことができます。

コンピューティングノードに導入された管理ノード（ mNode ）は、サポートされるハイパーバイザー上で仮想マシンとして実行されます。mNode は、 ActiveIQ （ SaaS ベースの管理ポータル）へのデータ送信、ハイブリッドクラウド制御ポータルのホスト、 NetApp HCI のリモートサポート用リバースプロキシなどに使用される。

NetApp HCI では、ディストリビューションを使用しないローリングアップグレードを実行できます。一方のノードが停止しても、もう一方のノードからデータが提供されます。次の図は、 NetApp HCI ストレージのマルチテナンシー機能を示しています。

image:citrix_image2.png["エラー：グラフィックイメージがありません"]

NetApp HCI ストレージは、コンピューティングノードへの iSCSI 接続を介してフラッシュストレージを提供します。iSCSI 接続は、 CHAP クレデンシャルまたはボリュームアクセスグループを使用して保護できます。ボリュームアクセスグループでは、許可されたイニシエータのみがボリュームにアクセスできます。アカウントには、ボリューム、 CHAP クレデンシャル、およびボリュームアクセスグループの集まりが保持されます。テナント間でネットワークレベルで分離するには、異なる VLAN を使用します。また、ボリュームアクセスグループでは、仮想ルーティング / 転送（ VRF ）もサポートされているため、テナントの IP サブネットが同じであったり、重複したりすることがあります。

カスタムの自動化タスクには、 RESTful Web インターフェイスを使用できます。NetApp HCI には、自動化タスク用の PowerShell モジュールと Ansible モジュールが用意されています。詳細については、を参照してください https://netapp.io/["netapp.io のコマンドです"^]。



==== ストレージノード

NetApp HCI は、 H410S と H610S の 2 つのストレージノードモデルをサポートしています。H410 シリーズは、 4 つのハーフ幅ノードを搭載した 2U シャーシで提供されます。各ノードには、ドライブ暗号化オプションを使用して、 480GB 、 960GB 、または 1.92TB のサイズの SSD が 6 本搭載されています。H410S は、少なくとも 2 つのノードで開始できます。各ノードは、 4K ブロックサイズで 50 、 000~ 10 、 000 IOPS を提供します。次の図は、 H410S ストレージノードの前面図と背面図を示しています。

image:citrix_image3.png["エラー：グラフィックイメージがありません"]

image:citrix_image4.png["エラー：グラフィックイメージがありません"]

H610S は、 960GB 、 1.92TB 、 3.84TB の NVMe ドライブを 12 本搭載した 1U ストレージノードで、ドライブ暗号化オプションもあります。クラスタを形成するには、少なくとも 4 つの H610S ノードが必要です。4K ブロックサイズのノードあたり約 100 、 000 IOPS を提供します。次の図は、 H610S ストレージノードの前面と背面を示しています。

image:citrix_image5.png["エラー：グラフィックイメージがありません"]

image:citrix_image6.png["エラー：グラフィックイメージがありません"]

1 つのクラスタに異なるストレージノードモデルを混在させることができます。1 つのノードの容量は、クラスタの合計サイズの 1/3 以下にする必要があります。ストレージノードには、 iSCSI 用のネットワークポートが 2 つ（ 10 / 25GbE – SFP28 ）、管理用のポートが 2 つ（ 1 / 10GbE – RJ45 ）搭載されています。シングルアウトオブバンド 1GbE RJ45 管理ポートも使用できます。



==== コンピューティングノード

NetApp HCI コンピューティングノードには、 H410C 、 H610C 、 H615C の 3 つのモデルがあります。コンピュートノードはすべて Redfish API と互換性があり、 Trusted Platform Module (TPM) および Intel Trusted Execution Technology (TXT) を有効にするための BIOS オプションを提供します。

H410C はハーフ幅のノードで、 2U シャーシに配置できます。シャーシには、コンピューティングノードとストレージノードを混在させることができます。H410C には、デュアルソケット構成で 4 ~ 20 コアを搭載した第 1 世代インテル Xeon シルバー / ゴールド・スケーラブル・プロセッサーが搭載されています。メモリサイズの範囲は 384GB から 1TB です。10 / 25GbE （ SFP28 ）ポート × 4 と 1GbE RJ45 ポート × 2 があり、 1 つの 1GbE RJ45 ポートをアウトオブバンド管理に使用できます。次の図は、 H410C コンピューティングノードの前面と背面を示しています。

image:citrix_image7.png["エラー：グラフィックイメージがありません"]

image:citrix_image8.png["エラー：グラフィックイメージがありません"]

H610C は 2RU で、デュアルソケットの第 1 世代 Intel Xeon Gold 6130 スケーラブルプロセッサを搭載し、 2.1GHz の 16 コア、 512GB の RAM 、 NVIDIA Tesla M10 GPU カードを 2 基搭載しています。このサーバには、 10 / 25GbE SFP28 ポートが 2 つと 1GbE RJ45 ポートが 2 つ搭載されており、アウトオブバンド管理に使用できる 1GbE RJ45 ポートが 1 つ搭載されています。次の図は、 H610C コンピューティングノードの前面と背面を示しています。

image:citrix_image9.png["エラー：グラフィックイメージがありません"]

image:citrix_image10.png["エラー：グラフィックイメージがありません"]

H610C には Tesla M10 カードが 2 基搭載されており、合計で 8 基の GPU を搭載した 64GB のフレームバッファメモリを搭載できます。GPU を有効にすると、最大 64 台のパーソナル仮想デスクトップをサポートできます。サーバごとにさらに多くのセッションをホストするには、共有デスクトップ配信モデルを使用できます。

H615C は、第 2 世代 Intel Xeon Silver / Gold スケーラブルプロセッサ用のデュアルソケットを備えた 1RU サーバで、ソケットあたり 4~24 コアを搭載できます。RAM の範囲は 384GB から 1.5TB です。1 つのモデルには 3 つの NVIDIA Tesla T4 カードが搭載されていサーバには、 2 つの 10 / 25GbE （ SFP28 ）と 1 つの 1GbE （ RJ45 ）が搭載されており、アウトオブバンド管理に使用できます。次の図は、 H615C コンピューティングノードの前面と背面を示したものです。

image:citrix_image11.png["エラー：グラフィックイメージがありません"]

image:citrix_image12.png["エラー：グラフィックイメージがありません"]

H615C には、合計 48GB のフレームバッファと 3 基の GPU を搭載した Tesla T4 カードが 3 基搭載されています。T4 カードは、 AI 推論ワークロードやプロフェッショナルグラフィックスに使用できる汎用 GPU カードです。これには、光線反射のシミュレーションに役立つ光線トレースコアが含まれています。



==== Hybrid Cloud Control の略

Hybrid Cloud Control ポータルは、多くの場合、ストレージノードやコンピューティングノードを追加して NetApp HCI をスケールアウトするために使用されます。このポータルでは、 NetApp HCI のコンピューティングノードとストレージノードのインベントリと、 ActiveIQ 管理ポータルへのリンクが提供されます。Hybrid Cloud Control の次のスクリーンショットを参照してください。

image:citrix_image13.png["エラー：グラフィックイメージがありません"]



=== NetApp AFF

NetApp AFF は、この解決策の一部として使用される、オールフラッシュのスケールアウトファイルストレージシステムを提供します。ONTAP は、 NetApp AFF 上で動作するストレージソフトウェアです。SMB ファイルストレージに ONTAP を使用する主な利点は次のとおりです。

* セキュアマルチテナンシー用の Storage Virtual Machine （ SVM ）
* 拡張性に優れたハイパフォーマンスファイルシステムを実現するネットアップの FlexGroup テクノロジ
* 容量階層化を実現する NetApp FabricPool テクノロジFabricPool を使用すると、ホットデータをローカルに保持し、コールドデータをクラウドストレージに転送できます）。
* アダプティブ QoS で SLA を保証QoS 設定は、割り当て済みスペースまたは使用済みスペースに基づいて調整できます。
* 自動化機能（ RESTful API 、 PowerShell 、 Ansible モジュール）
* ネットアップの Snapshot 、 NetApp SnapMirror 、 NetApp MetroCluster テクノロジなど、データ保護機能とビジネス継続性機能を利用できます




=== Mellanox スイッチ

この解決策では、 Mellanox SN2010 スイッチを使用します。ただし、互換性のある他のスイッチを使用することもできます。NetApp HCI でよく使用される Mellanox スイッチを次に示します。

|===
| モデル | ラックユニット | SFP28 （ 10 / 25GbE ）ポート | QSFP （ 40 / 100GbE ）ポート | アグリゲートスループット（ Tbps ） 


| SN2010 | 半幅 | 18 | 4. | 1.7 


| SN2100 | 半幅 | – | 16 | 3.2 


| SN2700 | 全幅 | – | 32 | 6.4 
|===

NOTE: QSFP ポートは、 4 本の 25GbE ブレークアウトケーブルをサポートします。

Mellanox スイッチは、オープンイーサネットスイッチであり、ネットワークオペレーティングシステムを選択できます。Mellanox Onyx OS 、または Cumulus - Linux 、 Linux Switch などのさまざまな Linux OS を選択できます。Mellanox スイッチは、スイッチソフトウェア開発キット、スイッチ抽象化インターフェイス（ SAI 、 Open Compute Project の一部）、クラウド環境でのオープンネットワーク用ソフトウェア（ Sonic ）もサポートしています。

Mellanox スイッチは低レイテンシを実現し、従来のデータセンタープロトコルと VXLAN のようなトンネリングプロトコルをサポートします。VXLAN ハードウェア VTEP は、 L2 ゲートウェイとして機能します。これらのスイッチは、 UC API 、 FIPS 140-2 （ System Secure Mode ）、 NIST 800-181A （ SSH Server Strict Mode ）、 CoPP （ IP Filter ）などのさまざまな認定セキュリティ標準をサポートします。

Mellanox スイッチは、 Ansible 、 Salt Stack 、 Puppet などの自動化ツールをサポートしています。Web 管理インターフェイスには、複数行の CLI コマンドを実行するオプションがあります。
