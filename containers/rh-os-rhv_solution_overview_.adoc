---
sidebar: sidebar 
permalink: containers/rh-os-rhv_solution_overview.html 
keywords: NVA-1149, Red Hat, virtualization, Openshift, containers, containerized, Trident, KVM, RHV-M 
summary:  
---
= NVA-1149 ： NetApp HCI for Red Hat OpenShift on Red Hat Virtualization
:hardbreaks:
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/


ネットアップ、 Alan Cowles 氏と Nikhil M Kulkarni 氏

Red Hat 仮想化での NetApp HCI for Red Hat OpenShift （ RHV ）は、完全に自動化されたのベストプラクティス導入ガイドです インストーラでプロビジョニングされたインフラストラクチャを介して Red Hat OpenShift をインストールします （ IPI ）を使用して、検証済みのののエンタープライズアーキテクチャにアクセスできます link:rhv-solution_overview.html["NVA-1148 ： NetApp HCI with Red Hat Virtualization"]。この NetApp Verified Architecture 導入ガイドの目的は、解決策の導入時に実行する検証済みの手順を簡潔に記載することです。本ドキュメントに記載したアーキテクチャと導入方法は、ネットアップと Red Hat のエキスパートによって共同で検証され、解決策のベストプラクティス実装を提供します。



== ユースケース

RHV 解決策上の NetApp HCI for Red Hat OpenShift は、以下のユースケースでお客様に卓越した価値を提供するように設計されています。

* NetApp HCI でオンデマンドで拡張できるインフラ
* RHV のエンタープライズ仮想化ワークロード
* Red Hat OpenShift でのエンタープライズコンテナ化ワークロード




== ビジネスバリュー

企業は、新しい製品の作成、リリースサイクルの短縮、新機能の迅速な追加を目的として、 DevOps の手法を採用する傾向に迫られています。即応性に優れた本来の性質から、コンテナやマイクロサービスは、 DevOps の実践を支援するうえで重要な役割を果たします。しかし、エンタープライズ環境で本番環境規模で DevOps を実践する場合、独自の課題が生じ、基盤となるインフラに次のような一定の要件が課せられます。

* スタック内のすべてのレイヤで高可用性を実現します
* 導入手順の簡易化
* ノンストップオペレーションとアップグレード
* API ベースのプログラム可能なインフラで、マイクロサービスの即応性を維持します
* パフォーマンスを保証するマルチテナンシー
* 仮想ワークロードとコンテナ化されたワークロードを同時に実行できます
* ワークロードのニーズに応じてインフラを個別に拡張できる


RHV 上の NetApp HCI for Red Hat OpenShift は、これらの課題に対応し、 RHV エンタープライズハイパーバイザ上に RedHat OpenShift IPI を完全に自動で導入することで、各問題に対処できる解決策を提示します。以降、この検証済みアーキテクチャで使用されるコンポーネントについて詳しく説明します。



== テクノロジの概要



=== NetApp HCI

NetApp HCI は、エンタープライズ規模で自由度の高いハイブリッドクラウドインフラ（ HCI ）解決策です。即応性、拡張性、管理性に優れた 2 ラックユニット（ 2RU ）の 4 ノードのビルディングブロックに、コンピューティングリソースとストレージリソースを提供します。また、 1RU のコンピューティングノードとサーバノードで構成することもできます。次の図に示す最小の導入は、 4 つの NetApp HCI ストレージノードと 2 つの NetApp HCI コンピューティングノードで構成されています。コンピューティングノードは、ハイアベイラビリティ（ HA ）クラスタ内に Red Hat Virtualization Hosts （ RHV-H ）ハイパーバイザーとしてインストールされます。この最小構成は、 NetApp HCI ストレージノードやコンピューティングノードを追加して利用可能なリソースを拡張することで、お客様のエンタープライズワークロードのニーズに合わせて簡単に拡張できます。

image:redhat_openshift_image1.png["エラー：グラフィックイメージがありません"]

NetApp HCI for Red Hat Virtualization の設計は、最小構成で次のコンポーネントで構成されています。

* NetApp Element ソフトウェアを実行する NetApp H シリーズオールフラッシュストレージノード
* Red Hat Virtualization RHV-H を実行する NetApp H シリーズコンピューティングノード ハイパーバイザー


NetApp HCI のコンピューティングノードとストレージノードの詳細については、を参照してください https://www.netapp.com/us/media/ds-3881.pdf["NetApp HCI データシート"^]。



=== NetApp Trident

Trident は、コンテナや Kubernetes ディストリビューション向けの、 Red Hat OpenShift などの、ネットアップのオープンソースで完全にサポートされているストレージオーケストレーションツールです。NetApp Element の一部として導入された NetApp HCI 解決策ストレージシステムを含め、ネットアップのストレージポートフォリオ全体と連携します。Trident を使用すると、ストレージ管理者の手を煩わせることなく、エンドユーザがネットアップストレージシステムからストレージをプロビジョニングして管理できるため、 DevOps ワークフローを高速化できます。管理者は、プロジェクトのニーズに基づいていくつかのストレージバックエンドを構成し、圧縮、特定のディスクタイプ、 QoS レベルなど、特定のパフォーマンスを保証する高度なストレージ機能をいくつでも利用できるストレージシステムモデルを構成できます。定義されたバックエンドは、開発者がプロジェクトの一環として永続的ボリューム要求（ PVC ）を作成し、永続的ストレージをオンデマンドでコンテナに接続する際に利用できます。

image:redhat_openshift_image2.png["エラー：グラフィックイメージがありません"]



=== Red Hat 仮想化

RHV は、 Red Hat Enterprise Linux （ RHEL ）上で動作し、 KVM ハイパーバイザーを使用するエンタープライズ仮想データセンタープラットフォームです。

RHV の詳細については、を参照してください https://www.redhat.com/en/technologies/virtualization/enterprise-virtualization["Red Hat Virtualization の Web サイト"^]。

RHV は以下の機能を提供します。

* * 仮想マシンとホストの一元管理。 * RHV マネージャは、導入環境内で物理マシンまたは仮想マシン（ VM ）として動作し、中央インターフェイスから解決策を管理するための Web ベースの GUI を提供します。
* * 自己ホスト型エンジン。 * ハードウェア要件を最小限に抑えるため、 RHV によって、ゲスト VM を実行するホスト上の VM として RHV マネージャ（ RHV-M ）を導入することができます。
* * 高可用性。 * ホスト障害が発生しても、システム停止を回避するために、 RHV を使用することで、 VM を高可用性に設定することができます。高可用性 VM は、耐障害性ポリシーを使用してクラスタレベルで制御されます。
* * 高い拡張性。 * 1 つの RHV クラスタで最大 200 台のハイパーバイザホストを使用できるため、 IT 部門は大量の VM で大量のリソースを消費するエンタープライズクラスのワークロードを処理する必要に対応できます。
* * セキュリティ強化。 *RHV 、セキュア仮想化（ sVirt ）、およびセキュリティ強化 Linux （ SELinux ）テクノロジーから継承されたものは、セキュリティの強化とホストおよび VM の強化を目的として RHV によって採用されています。これらの機能の主なメリットは、 VM とそれに関連するリソースを論理的に分離できることです。




==== Red Hat Virtualization Manager の略

RHV-M は、 RHV 仮想化環境内の物理リソースと論理リソースに対して、エンタープライズクラスの一元管理を提供します。RHV-M 機能にアクセスするために、異なるロールベースポータルを持つ Web ベースの GUI が提供されます。

RHV-M は、オープンソースのコミュニティベースの RESTful API を介して RHV リソースの構成と管理を公開します。また、 Red Hat CloudForms や Red Hat Ansible による自動化やオーケストレーションなどの本格的な統合もサポートしています。



==== Red Hat Virtualization ホスト

ホスト（ハイパーバイザー）は、 VM を実行するためのハードウェアリソースを提供する物理サーバです。Kernel-based Virtual Machine （ KVM ）は完全な仮想化サポートを提供し、 Virtual Desktop Server Manager （ VDSM ）はホストの RHV-M との通信を担当するホストエージェントです

RHV では、 RHV-H ホストと RHEL ホストの 2 種類のホストがサポートされます。

* RHV-H は RHEL ベースの軽量最小オペレーティングシステムで、 RHV ハイパーバイザとしての物理サーバのセットアップを容易にするように最適化されています。
* RHEL ホストは、標準の RHEL オペレーティングシステムを実行するサーバであり、あとで必要なサブスクリプションを設定して、物理サーバを RHV ホストとして使用できるようにするために必要なパッケージをインストールします。




==== Red Hat の仮想化アーキテクチャ

RHV は、インフラストラクチャ内の物理サーバとして RHV-M を使用するアーキテクチャと、自己ホスト型エンジンとして RHV-M を構成するアーキテクチャの 2 つに展開できます。RHV-M は他の VM と同じ環境でホストされる VM である、自己ホスト型エンジンの導入を推奨し、この導入ガイドで特に使用します。

次の図に示すように、ゲスト VM の高可用性を実現するには、自己ホスト型ノードが少なくとも 2 つ必要です。Manager VM の高可用性を確保するために、 HA サービスを有効にして、すべての自己ホスト型エンジンノードで実行します。

image:redhat_openshift_image3.png["エラー：グラフィックイメージがありません"]



=== Red Hat OpenShift Container Platform

Red Hat OpenShift Container Platform は、完全にサポートされているエンタープライズ向け Kubernetes プラットフォームです。Red Hat は、オープンソースの Kubernetes をいくつか強化して、コンテナ化されたアプリケーションの構築、導入、管理を完全に統合したすべてのコンポーネントを備えたアプリケーションプラットフォームを提供します。Red Hat OpenShift 4.4 では、この解決策に導入されている IPI メソッドを使用して、インストールおよび管理プロセスが合理化されています。この導入方法を利用すると、クラスタレベルとアプリケーションレベルの両方で計測と監視を提供するフル機能の OpenShift クラスタを完全に構成し、 Red Hat Virtualization 上に 1 時間以内に導入できます。OpenShift ノードは、 RHEL に基づいてコンテナを実行するように設計された変更不可のシステムイメージである RHEL CoreOS をベースにしています。 RHEL では、エンドユーザのニーズに応じて簡単にアップグレードまたは拡張でき、パブリッククラウドのメリットをローカルデータセンターに提供できます。

image:redhat_openshift_image4.png["エラー：グラフィックイメージがありません"]

link:rh-os-rhv_architectural_overview.html["次のセクションでは、アーキテクチャの概要を解説します。 RHV 上で Red Hat OpenShift を実現する NetApp HCI"]
