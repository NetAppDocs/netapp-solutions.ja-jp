---
sidebar: sidebar 
permalink: containers/rh-os-rhv-6._install_openshift_container_platform.html 
keywords: Container platform, installation 
summary:  
---
= 6. OpenShift Container Platform のインストール： RHV に Red Hat OpenShift 用 NetApp HCI
:hardbreaks:
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/


[role="lead"]
OpenShift Container Platform をインストールするには、次の手順を実行します。

. OpenShift インストール用のディレクトリを作成し、ダウンロードしたファイルをそのディレクトリに転送します。tar アーカイブから OpenShift インストーラファイルを展開します。
+
....
[user@rhel7 ~]$ mkdir openshift-deploy
[user@rhel7 ~]$ cd openshift-deploy
[user@rhel7 openshift-deploy]$ tar xvf openshift-install-linux.tar.gz
README.md
openshift-install
[user@rhel7 openshift-deploy]$ ls -la
total 453260
drwxr-xr-x.  2 user user       146 May 26 16:01 .
dr-xr-x---. 16 user user      4096 May 26 15:58 ..
-rw-r--r--.  1 user user  25249648 May 26 15:59 openshift-client-linux.tar.gz
-rwxr-xr-x.  1 user user 354664448 Apr 27 01:37 openshift-install
-rw-r--r--.  1 user user  84207215 May 26 16:00 openshift-install-linux.tar.gz
-rw-r--r--.  1 user user      2736 May 26 15:59 pull-secret.txt
-rw-r--r--.  1 user user       706 Apr 27 01:37 README.md
....
+

NOTE: インストールプログラムは、クラスタのインストールに使用するディレクトリに複数のファイルを作成します。インストールプログラムとインストールプログラムによって作成されたファイルは、クラスタが起動した後も保持しておく必要があります。

+

NOTE: 以前にダウンロードしたバイナリ・ファイル（「 OpenShift -install 」や「 OC 」など）は、ユーザのパスにあるディレクトリ（「 /usr/local/bin 」など）にコピーして、実行しやすくすることができます。

. 「 OpenShift -install create cluster 」コマンドを実行してクラスタを作成し、インストールプログラムのプロンプトに応答します。SSH 公開鍵を渡し、プラットフォームから ovirt を選択して、 RHV インフラストラクチャの詳細を入力し、 3 つの予約済み IP アドレスとダウンロードしたプルシークレットをインストールプログラムのプロンプトに入力します。すべての入力が提供されると、インストールプログラムは、ブートストラップマシンを一時的な Kubernetes コントロールプレーンで作成および構成します。このコントロールプレーンは、本番 Kubernetes コントロールプレーンを使用してマスター VM を作成および構成します。マスターノード上のコントロールプレーンが、ワーカー VM を作成して設定します。
+
クラスタ全体の運用が開始されるまでに 30~45 分程度かかる場合があります。

+
....
[user@rhel7 openshift-deploy]$ ./openshift-install create cluster --dir=/home/user/openshift-deploy --log-level=info                    ? SSH Public Key /home/user/.ssh/id_rsa.pub
? Platform ovirt
? oVirt cluster Default
? oVirt storage domain data_domain
? oVirt network ovirtmgmt
? Internal API virtual IP 10.63. 172.151
? Internal DNS virtual IP 10.63. 172.153
? Ingress virtual IP 10.63. 172.152
? Base Domain cie.netapp.com
? Cluster Name rhv-ocp-cluster
? Pull Secret [? for help] ********************************************************************************************************************************************************************************************************************************************************************************************************
INFO Obtaining RHCOS image file from 'https://releases-art-rhcos.svc.ci.openshift.org/art/storage/releases/rhcos-4.4/44.81.202004250133-0/x86_64/rhcos-44.81.202004250133-0-openstack.x86_64.qcow2.gz?sha256=f8a44e0ea8cc45882dc22eb632a63afb90b414839b8aa92f3836ede001dfe9cf'
INFO The file was found in cache: /home/user/.cache/openshift-installer/image_cache/e263efbc53c0caf612bcfaad10e3dff0. Reusing...
INFO Creating infrastructure resources...
INFO Waiting up to 20m0s for the Kubernetes API at https://api.rhv-ocp-cluster.cie.netapp.com:6443...
INFO API v1.17.1 up
INFO Waiting up to 40m0s for bootstrapping to complete...
INFO Destroying the bootstrap resources...
INFO Waiting up to 30m0s for the cluster at https://api.rhv-ocp-cluster.cie.netapp.com:6443 to initialize...
INFO Waiting up to 10m0s for the openshift-console route to be created...
INFO Install complete!
INFO To access the cluster as the system:admin user when using 'oc', run 'export KUBECONFIG=/home/user/openshift-deploy/auth/kubeconfig'
INFO Access the OpenShift web-console here: https://console-openshift-console.apps.rhv-ocp-cluster.cie.netapp.com
INFO Login to the console with user: kubeadmin, password: NtsqU-p3qUb-8Hscu-JfAq7

....
. クラスタの導入が完了すると、 Web コンソールへのリンクや kubeadmin ユーザのクレデンシャルなど、 OpenShift クラスタにアクセスするための指示が表示されます。これらの詳細は必ずメモしてください。
. RHV マネージャにログインし、 OCP クラスタに関連する VM が稼働中であることを確認します。


image:redhat_openshift_image12.png["エラー：グラフィックイメージがありません"]

link:rh-os-rhv-7._access_console_web_console.html["次の手順： 7.コンソール /Web コンソールにアクセスします"]
