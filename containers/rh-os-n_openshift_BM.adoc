---
sidebar: sidebar 
permalink: containers/rh-os-n_openshift_BM.html 
keywords: OpenShift, bare metal, IPI 
summary:  
---
= ベアメタルで実装された OpenShift


ベアメタル上の OpenShift では、コモディティサーバ上に OpenShift Container Platform を自動で導入できます。

ベアメタル上の OpenShift は、コンテナ化の準備ができていないアプリケーションの仮想ワークロードをサポートしながら、 OpenShift クラスタの導入、迅速なプロビジョニング、拡張を容易にする OpenShift の仮想導入に似ています。ベアメタルに導入することで、 OpenShift 環境に加えてホストハイパーバイザー環境の管理に必要な追加のオーバーヘッドを必要としません。ベアメタルサーバに直接導入することで、ホストと OpenShift 環境間でリソースを共有する必要がある物理的なオーバーヘッドの制限を軽減できます。



== ベアメタル上の OpenShift には次の機能があります。

* * IPI またはサポートされたインストーラーの展開。 * ベアメタルサーバー上でインストーラー・プロビジョニング・インフラストラクチャー（ IPI ）によって展開される OpenShift クラスターにより、ハイパーバイザー層を管理することなく、汎用性が高く、容易に拡張できる OpenShift 環境を汎用サーバーに直接展開できます。
* * 小型クラスタ設計。 * ハードウェア要件を最小限に抑えるため、ベアメタル上の OpenShift では、 OpenShift コントロールプレーンノードをワーカーノードやホストコンテナとしても機能させることにより、わずか 3 ノードのクラスタを導入できます。
* * OpenShift 仮想化。 * OpenShift では、 OpenShift Virtualization を使用してコンテナ内で仮想マシンを実行できます。このコンテナネイティブの仮想化では、コンテナ内で KVM ハイパーバイザーを実行し、 VM ストレージ用の永続ボリュームを接続します。
* * AI / ML に最適化されたインフラ。 * GPU ベースのワーカーノードを OpenShift 環境に組み込み、 OpenShift Advanced Scheduling を活用して、マシンラーニングアプリケーション向けの Kubeflow のようなアプリケーションを導入します。




== ネットワーク設計

NetApp 解決策上の Red Hat OpenShift では、 2 つのデータスイッチを使用して 25Gbps でプライマリデータ接続を提供します。また、ストレージノードのインバンド管理用に 1Gbps で接続を提供する管理スイッチを 2 台使用し、 IPMI 機能のアウトオブバンド管理も使用します。

OpenShift ベアメタル IPI 環境では、プロビジョニングノード、つまりネットワークインターフェイスが別々のネットワークに接続されている Red Hat Enterprise Linux 8 マシンを作成する必要があります。

* * ネットワークのプロビジョニング。 * このネットワークは、ベアメタルノードをブートし、 OpenShift クラスタを導入するために必要なイメージとパッケージをインストールするために使用されます。
* * ベアメタルネットワーク。 * このネットワークは、導入後のクラスタのパブリック側通信に使用されます。


プロビジョニングノードをセットアップするために、お客様は、トラフィックをノード自体と、導入用にプロビジョニングされたブートストラップ VM に適切にルーティングできるようにするブリッジインターフェイスを作成します。クラスタが導入されると、 API および入力 VIP アドレスがブートストラップノードから新しく導入されたクラスタに移行されます。

次の図は、 IPI の導入時と導入の完了後の環境を示しています。

image:redhat_openshift_image36.png["エラー：グラフィックイメージがありません"]

image:redhat_openshift_image37.png["エラー：グラフィックイメージがありません"]



=== VLAN の要件

ネットアップ解決策を使用した Red Hat OpenShift は、仮想ローカルエリアネットワーク（ VLAN ）を使用して、ネットワークトラフィックを論理的に分離するように設計されています。

|===


| VLAN | 目的 | VLAN ID 


| アウトオブバンド管理ネットワーク | ベアメタルノードと IPMI の管理 | 16 


| ベアメタルネットワーク | クラスタが使用可能になると、 OpenShift サービス用のネットワーク | 181 


| プロビジョニングネットワーク | Network for PXE boot and installation of bare metal nodes （ベアメタルノードの PXE ブートおよびインストール用ネットワーク IPI を使用 | 3485 
|===

NOTE: これらの各ネットワークは仮想的に VLAN で分離されますが、 PXE ブートシーケンス中に VLAN タグを渡す方法がないため、各物理ポートをプライマリ VLAN が割り当てられたアクセスモードで設定する必要があります。



=== ネットワークインフラストラクチャサポートリソース

OpenShift Container Platform を導入する前に、次のインフラを用意する必要があります。

* インバンド管理ネットワークと VM ネットワークからアクセス可能な完全なホスト名解決を提供する DNS サーバが少なくとも 1 台必要です。
* インバンド管理ネットワークおよび VM ネットワークからアクセスできる NTP サーバが少なくとも 1 台必要です。
* （オプション）インバンド管理ネットワークと VM ネットワークの両方のアウトバウンドインターネット接続。


link:rh-os-n_overview_netapp.html["次：ネットアップストレージの概要"]
