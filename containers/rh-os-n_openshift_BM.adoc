---
sidebar: sidebar 
permalink: containers/rh-os-n_openshift_BM.html 
keywords: OpenShift, bare metal, IPI 
summary:  
---
= ベアメタルでの OpenShift ：ネットアップを使用した Red Hat OpenShift
:hardbreaks:
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/


ベアメタルに実装された OpenShift Container Platform は、コモディティサーバに自動で導入されます。

OpenShift クラスタの導入の容易さ、迅速なプロビジョニング、拡張が可能になると同時に、コンテナ化の準備ができていないアプリケーションの仮想ワークロードをサポートする必要性も提供するため、 OpenShift の仮想導入によく使用されています。ベアメタルに導入することで、ホストハイパーバイザー環境や OpenShift 環境の管理に余分なオーバーヘッドが必要になります。ベアメタルサーバに直接導入することで、ホスト環境と OpenShift 環境間でリソースを共有する必要がある物理的なオーバーヘッドの制限を軽減できます。



== ベアメタル上の OpenShift には次の機能があります。

* * IPI または Assisted Installer Deployment* ベアメタルサーバ上で Installer Provisioned Infrastructure （ IPI ）によって実装された OpenShift クラスタを使用すると、ハイパーバイザーレイヤを管理することなく、汎用性が高く、拡張性に優れた OpenShift 環境を汎用サーバに直接導入できます。
* * コンパクト・クラスタ・デザイン * ハードウェア要件を最小限に抑えるため、ベアメタルに実装された OpenShift により、ユーザーはわずか 3 ノードのクラスタを導入できます。これにより、 OpenShift コントロール・プレーン・ノードをワーカー・ノードやホスト・コンテナとしても機能させることができます。
* * OpenShift Virtualization * OpenShift では、 OpenShift Virtualization を使用してコンテナ内で仮想マシンを実行できます。このコンテナネイティブの仮想化では、コンテナ内で KVM ハイパーバイザーを実行し、 VM ストレージ用の永続ボリュームを接続します。
* * AI / ML に最適化されたインフラ * GPU ベースのワーカーノードを OpenShift 環境に組み込み、 OpenShift Advanced Scheduling を活用して、機械学習アプリケーション向けの Kubeflow のようなアプリケーションを導入します。




== ネットワーク設計

NetApp 解決策上の Red Hat OpenShift では、 2 つのデータスイッチを使用して 25Gbps でプライマリデータ接続を提供します。また、ストレージノードのインバンド管理用に 1Gbps で接続を提供する管理スイッチをさらに 2 台使用し、 IPMI 機能のアウトオブバンド管理も行います。

OpenShift ベアメタル IPI 環境では、お客様にプロビジョニングノード、つまりネットワークインターフェイスを別々のネットワークに接続する必要のある Red Hat Enterprise Linux 8 マシンを作成する必要があります。

* * ネットワークのプロビジョニング：このネットワークは、ベアメタルノードをブートし、 OpenShift クラスタを導入するために必要なイメージとパッケージをインストールするために使用されます。
* *Baremetal Network: * このネットワークは、クラスターが展開された後で、パブリックに通信するために使用されます。


プロビジョニングノードのセットアップでは、トラフィックがノード自体とブートストラップ VM の両方で適切にルーティングされるようにするブリッジインターフェイスを作成します。ブートストラップ VM は、導入用にプロビジョニングされます。

クラスタが展開されると、 API と入力 VIP アドレスがブートストラップノードから新しく展開されたクラスタに移行されます。

次の図は、 IPI の展開中と展開が完了した後の環境を示しています。

image:redhat_openshift_image36.png["エラー：グラフィックイメージがありません"]

image:redhat_openshift_image37.png["エラー：グラフィックイメージがありません"]



=== VLAN の要件

ネットアップ解決策を使用した Red Hat OpenShift は、仮想ローカルエリアネットワーク（ VLAN ）を使用して、ネットワークトラフィックを論理的に分離するように設計されています。

|===


| VLAN | 目的 | VLAN ID 


| アウトオブバンド管理ネットワーク | ベアメタルノードと IPMI の管理 | 16 


| ベアメタルネットワーク | クラスタが使用可能になると、 OpenShift サービス用のネットワーク | 181 


| プロビジョニングネットワーク | Network for PXE boot and installation of bare metal nodes （ベアメタルノードの PXE ブートおよびインストール用ネットワーク IPI を使用 | 3485 
|===

NOTE: これらの各ネットワークは仮想的に VLAN で分離されていましたが、 PXE ブートシーケンス中に VLAN タグを渡す方法がないため、プライマリ VLAN を割り当てた状態で各物理ポートを「アクセスモード」で設定する必要がありました。



=== ネットワークインフラストラクチャサポートリソース

OpenShift Container Platform を導入する前に、次のインフラを用意する必要があります。

* インバンド管理ネットワークおよび VM ネットワークからアクセス可能な完全なホスト名解決を提供する DNS サーバが少なくとも 1 台あります。
* インバンド管理ネットワークおよび VM ネットワークからアクセスできる NTP サーバが少なくとも 1 台必要です。
* （オプション）インバンド管理ネットワークと VM ネットワークの両方のアウトバウンドインターネット接続。


link:rh-os-n_overview_netapp.html["次：ネットアップストレージの概要"]
