---
sidebar: sidebar 
permalink: containers/rh-os-n_openshift_BM.html 
keywords: OpenShift, bare metal, IPI 
summary:  
---
= ベアメタルで実装された OpenShift
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
ベアメタル上の OpenShift では、コモディティサーバ上に OpenShift Container Platform を自動で導入できます。

ベアメタル上の OpenShift は、コンテナ化の準備ができていないアプリケーションの仮想ワークロードをサポートしながら、 OpenShift クラスタの導入、迅速なプロビジョニング、拡張を容易にする OpenShift の仮想導入に似ています。ベアメタルに導入することで、 OpenShift 環境に加えてホストハイパーバイザー環境の管理に必要な追加のオーバーヘッドを必要としません。ベアメタルサーバに直接導入することで、ホストと OpenShift 環境間でリソースを共有する必要がある物理的なオーバーヘッドの制限を軽減できます。



== ベアメタル上の OpenShift には次の機能があります。

* * IPIまたはAssisted Installer Deployment * Installer Provisioned Infrastructure（IPI）によってベアメタルサーバにOpenShiftクラスタを導入すると、ハイパーバイザーレイヤを管理することなく、汎用性が高く拡張性の高いOpenShift環境を汎用サーバに直接導入できます。
* *コンパクトなクラスタ設計*ハードウェア要件を最小限に抑えるために、OpenShiftをベアメタルで使用すると、OpenShiftコントロールプレーンノードがワーカーノードおよびホストコンテナとしても機能するため、わずか3ノードのクラスタを導入できます。
* * OpenShift仮想化* OpenShiftは、OpenShift仮想化を使用して、コンテナ内で仮想マシンを実行できます。このコンテナネイティブの仮想化では、コンテナ内で KVM ハイパーバイザーを実行し、 VM ストレージ用の永続ボリュームを接続します。
* * AI / MLに最適化されたインフラ* GPUベースのワーカーノードをOpenShift環境に組み込み、OpenShift Advanced Schedulingを活用することで、Kubeflowなどのアプリケーションを機械学習アプリケーションに導入できます。




== ネットワーク設計

NetApp 解決策上の Red Hat OpenShift では、 2 つのデータスイッチを使用して 25Gbps でプライマリデータ接続を提供します。また、ストレージノードのインバンド管理用に 1Gbps で接続を提供する管理スイッチを 2 台使用し、 IPMI 機能のアウトオブバンド管理も使用します。

OpenShift ベアメタル IPI 環境では、プロビジョニングノード、つまりネットワークインターフェイスが別々のネットワークに接続されている Red Hat Enterprise Linux 8 マシンを作成する必要があります。

* *プロビジョニングネットワーク*このネットワークは、ベアメタルノードをブートし、OpenShiftクラスタの導入に必要なイメージとパッケージをインストールするために使用されます。
* *ベアメタルネットワーク*このネットワークは、クラスタ導入後のパブリック側通信に使用されます。


プロビジョニングノードをセットアップするために、お客様は、トラフィックをノード自体と、導入用にプロビジョニングされたブートストラップ VM に適切にルーティングできるようにするブリッジインターフェイスを作成します。クラスタが導入されると、 API および入力 VIP アドレスがブートストラップノードから新しく導入されたクラスタに移行されます。

次の図は、 IPI の導入時と導入の完了後の環境を示しています。

image::redhat_openshift_image36.png[RedHat OpenShiftイメージ36]

image::redhat_openshift_image37.png[RedHat OpenShiftイメージ37]



=== VLAN の要件

ネットアップ解決策を使用した Red Hat OpenShift は、仮想ローカルエリアネットワーク（ VLAN ）を使用して、ネットワークトラフィックを論理的に分離するように設計されています。

[cols="40%, 40%, 20%"]
|===
| VLAN | 目的 | VLAN ID 


| アウトオブバンド管理ネットワーク | ベアメタルノードと IPMI の管理 | 16 


| ベアメタルネットワーク | クラスタが使用可能になると、 OpenShift サービス用のネットワーク | 181 


| プロビジョニングネットワーク | Network for PXE boot and installation of bare metal nodes （ベアメタルノードの PXE ブートおよびインストール用ネットワーク IPI を使用 | 3485 
|===

NOTE: これらの各ネットワークは仮想的に VLAN で分離されますが、 PXE ブートシーケンス中に VLAN タグを渡す方法がないため、各物理ポートをプライマリ VLAN が割り当てられたアクセスモードで設定する必要があります。



=== ネットワークインフラストラクチャサポートリソース

OpenShift Container Platform を導入する前に、次のインフラを用意する必要があります。

* インバンド管理ネットワークと VM ネットワークからアクセス可能な完全なホスト名解決を提供する DNS サーバが少なくとも 1 台必要です。
* インバンド管理ネットワークおよび VM ネットワークからアクセスできる NTP サーバが少なくとも 1 台必要です。
* （オプション）インバンド管理ネットワークと VM ネットワークの両方のアウトバウンドインターネット接続。

