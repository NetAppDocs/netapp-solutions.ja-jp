---
sidebar: sidebar 
permalink: ai/aipod_nv_storage.html 
keywords: NetApp AI, AI, Artificial Intelligence, ML, Machine Learning, NVIDIA, NVIDIA AI Enterprise, NVIDIA BasePOD, NVIDIA DGX 
summary: NVIDIA DGXシステムを搭載したNetApp AIポッド-ストレージシステムの設計とサイジングのガイダンス 
---
= NVIDIA DGXシステムを搭載したNetApp AIポッド-ストレージシステムの設計とサイジングのガイダンス
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/


link:aipod_nv_architecture.html["以前：NVIDIA DGXシステムを搭載したNetApp AIポッド-アーキテクチャ"]



== ストレージシステムの設計

各AFF A800ストレージシステムは、各コントローラの4つの100GbEポートを使用して接続されます。各コントローラの2つのポートがDGXシステムからのワークロードデータアクセスに使用され、各コントローラの2つのポートがLACPインターフェイスグループとして構成され、クラスタ管理アーティファクトとユーザホームディレクトリ用の管理プレーンサーバからのアクセスをサポートします。ストレージシステムからのすべてのデータアクセスはNFS経由で提供されます。AIワークロードアクセス専用のStorage Virtual Machine（SVM）と、クラスタ管理専用の別のSVMがあります。

ワークロードSVMは合計4つの論理インターフェイス（LIF）で構成され、各ストレージVLANに2つのLIFがあります。各物理ポートが2つのLIFをホストするため、各コントローラのVLANごとに2つのLIFが作成されます。この構成では、最大帯域幅と、各LIFが同じコントローラ上の別のポートにフェイルオーバーする手段が提供されるため、ネットワーク障害が発生した場合でも両方のコントローラがアクティブなままになります。この構成では、RDMA経由のNFSもサポートされ、GPUDirectストレージへのアクセスが可能になります。ストレージ容量は、両方のコントローラにまたがる単一の大規模FlexGroupボリュームとしてプロビジョニングされます。このFlexGroupにはSVM上のどのLIFからもアクセスでき、DGX A100システムのマウントポイントは、ロードバランシングに使用できるLIFに分散されます。

管理SVMに必要なLIFは1つだけです。このLIFは、各コントローラで設定された2ポートインターフェイスグループでホストされます。他のFlexGroupは、クラスタノードのイメージ、システム監視履歴データ、エンドユーザのホームディレクトリなど、クラスタ管理アーティファクトを格納するために管理SVM上にプロビジョニングされます。次の図は、ストレージシステムの論理構成を示しています。

image:oai_basepod1_logical.png["エラー：グラフィックイメージがありません"]



== ストレージシステムのサイジングに関するガイダンス

このアーキテクチャは、NVIDIA DGXシステムとNetApp AFFストレージシステムを使用したDLインフラの実装を希望するお客様やパートナー様向けのリファレンスアーキテクチャです。次の表に、各AFFモデルでサポートされるA100およびH100 GPUの概算数を示します。

image:oai_sizing.png["エラー：グラフィックイメージがありません"]

で示したように、 link:https://www.netapp.com/pdf.html?item=/media/21793-nva-1153-design.pdf["このリファレンスアーキテクチャの以前のバージョン"]AFF A800システムは、8台のDGX A100システムで生成されるDLトレーニングワークロードに簡単に対応します。上記の他のストレージシステムについてはこれらの結果に基づいて算出したものであり、H100 GPUについてはA100システムに必要なストレージスループットを2倍にして算出したものです。  ストレージパフォーマンス要件の高い大規模な環境では、AFFシステムをNetApp ONTAPクラスタに追加し、1つのクラスタに最大12のHAペア（24ノード）を追加できます。この解決策で説明するFlexGroupテクノロジを使用すると、24ノードクラスタで40PBを超える容量と最大300Gbpsのスループットを単一のネームスペースで実現できます。AFF A400、A250、C800などの他のNetAppストレージシステムは、低パフォーマンスまたは大容量のオプションを提供し、小規模な導入に低コストで対応します。ONTAP 9は混在モデルのクラスタをサポートしているため、最初は小規模な設置面積から始めて、容量やパフォーマンスの要件が増大したときに、クラスタにストレージシステムを追加したり、大容量のストレージシステムを追加したりすることができます。
link:aipod_nv_conclusion.html["次の記事：NVIDIA DGXシステムを搭載したNetApp AIポッド-終わりに。"]
