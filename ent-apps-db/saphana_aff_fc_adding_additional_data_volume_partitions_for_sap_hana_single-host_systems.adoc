---
sidebar: sidebar 
permalink: ent-apps-db/saphana_aff_fc_adding_additional_data_volume_partitions_for_sap_hana_single-host_systems.html 
keywords: data, volume, partitions, lun 
summary: SAP HANA 2.0 SPS4 以降では、追加のデータボリュームパーティションを構成できます。この機能を使用すると、 SAP HANA テナントデータベースのデータボリュームに複数の LUN を設定し、単一 LUN のサイズやパフォーマンスの制限を超えて拡張することができます。 
---
= SAP HANA シングルホストシステムのデータボリュームパーティションを追加します
:hardbreaks:
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/


SAP HANA 2.0 SPS4 以降では、追加のデータボリュームパーティションを構成できます。この機能を使用すると、 SAP HANA テナントデータベースのデータボリュームに複数の LUN を設定し、単一 LUN のサイズやパフォーマンスの制限を超えて拡張することができます。


NOTE: SAP HANA KPI を達成するために複数のパーティションを使用する必要はありません。単一の LUN にパーティションが 1 つあると、必要な KPI が満たされます。


NOTE: データボリュームに複数の個別の LUN を使用することは、 SAP HANA シングルホストシステムでのみ可能です。SAP HANA マルチホストシステムに必要な SAP ストレージコネクタは、データボリュームに対して 1 つのデバイスのみをサポートします。

データボリュームのパーティションはいつでも追加できますが、 SAP HANA データベースの再起動が必要になる場合があります。



== 追加のデータボリュームパーティションの有効化

追加のデータボリュームパーティションを有効にするには、次の手順を実行します。

. global.ini` ファイル内に次のエントリを追加します
+
....
[customizable_functionalities]
persistence_datavolume_partition_multipath = true
....
. データベースを再起動して機能を有効にしてください。SAP HANA Studio でパラメータを global.ini` ファイルに追加する際に Systemdb 設定を使用すると、データベースが再起動されなくなります。




== ボリュームと LUN の構成

ボリュームと LUN のレイアウトは、 1 つのデータボリュームパーティションを持つ単一のホストのレイアウトに似ていますが、ログボリュームとして別のアグリゲートに追加のデータボリュームと LUN が格納され、残りのデータボリュームも同じです。次の表は、 2 つのデータボリュームパーティションを持つ SAP HANA シングルホストシステムの構成例を示しています。

|===
| コントローラ A のアグリゲート 1 | コントローラ A のアグリゲート 2 | コントローラ B のアグリゲート 1 | コントローラ B のアグリゲート 2 


| データボリューム： SID_data_mnt00001 | 共有ボリューム： SID_shared | データボリューム： SID_data2_mnt00001 | ログボリューム： SID_log_mnt00001 
|===
次の表に、 2 つのデータボリュームパーティションを持つシングルホストシステムのマウントポイント構成の例を示します。

|===
| LUN | HANA ホストのマウントポイント | 注 


| SID_data_mnt00001 | /hana/data/SID/mnt00001 | /etc/fstab エントリを使用してマウントされます 


| SID_data2_mnt00001 | /hana/data2/SID/mnt00001 | /etc/fstab エントリを使用してマウントされます 


| SID_log_mnt00001 | /hana/log/sid/mnt00001 | /etc/fstab エントリを使用してマウントされます 


| SID_shared | /hana/shared-SID を指定します | /etc/fstab エントリを使用してマウントされます 
|===
ONTAP システムマネージャまたは ONTAP CLI を使用して、新しいデータ LUN を作成します。



== ホストの設定

ホストを設定するには、次の手順を実行します。

. 第 0 章の説明に従って、追加の LUN のマルチパスを設定します。
. HANA システムに属する追加の各 LUN に XFS ファイルシステムを作成します。
+
....
stlrx300s8-6:/ # mkfs.xfs /dev/mapper/hana- SS3_data2_mnt00001
....
. 追加のファイル・システム /s を '/etc/fstab 構成ファイルに追加します
+

NOTE: データとログ LUN の XFS ファイルシステムは 'relatim' および inode64' マウントオプションを使用してマウントする必要があります

+
....
stlrx300s8-6:/ # cat /etc/fstab
/dev/mapper/hana-SS3_shared /hana/shared xfs default 0 0
/dev/mapper/hana-SS3_log_mnt00001 /hana/log/SS3/mnt00001 xfs relatime,inode64,nobarrier 0 0
/dev/mapper/hana-SS3_data_mnt00001 /hana/data/SS3/mnt00001 xfs relatime,inode64 0 0/dev/mapper/hana-SS3_data2_mnt00001 /hana/data2/SS3/mnt00001 xfs relatime,inode64 0 0
....
. マウントポイントを作成し、データベースホストに権限を設定します。
+
....
stlrx300s8-6:/ # mkdir -p /hana/data2/SS3/mnt00001
stlrx300s8-6:/ # chmod –R 777 /hana/data2/SS3
....
. ファイルシステムをマウントし、「 mount – a 」コマンドを実行します。




== データボリュームパーティションを追加しています

データボリュームパーティションをテナントデータベースに追加するには、テナントデータベースに対して次の SQL ステートメントを実行します。追加する LUN のパスはそれぞれ異なります。

....
ALTER SYSTEM ALTER DATAVOLUME ADD PARTITION PATH '/hana/data2/SID/';
....
image:saphana_aff_fc_image20.jpg["エラー：グラフィックイメージがありません"]
