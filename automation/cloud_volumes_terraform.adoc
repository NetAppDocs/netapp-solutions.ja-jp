---
sidebar: sidebar 
permalink: automation/cloud_volumes_terraform.html 
keywords: AWS, Azure, GCP, FSX, CVO, ANF, NetApp Volumes, Terraform, automation 
summary: このページでは、テラフォームを使用してネットアップのボリュームをクラウドプロバイダ（ AWS 、 Azure 、 GCP ）に自動で導入する方法について説明します。 
---
= Terraform による Cloud Volume オートメーション
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
この解決策 では、 Terraform モジュールを使用して、 AWS （ CVO シングルノード、 CVO HA 、 FSX ONTAP ）および Azure （ CVO シングルノード、 CVO HA 、 ANF ）への Cloud Volume の自動導入を文書化しています。コードは次の場所にあります。 https://github.com/NetApp/na_cloud_volumes_automation[]



== 前提条件

. Terraform >=0.13
. Cloud Manager アカウント
. クラウドプロバイダアカウント– AWS 、 Azure
. ホストマシン（ Terraform がサポートするすべての OS ）




== プロバイダのドキュメント

Cloud Manager向けTerraformプロバイダのドキュメントは、次のURLから入手できます。link:https://registry.terraform.io/providers/NetApp/netapp-cloudmanager/latest/docs["https://registry.terraform.io/providers/NetApp/netapp-cloudmanager/latest/docs"]



=== プロバイダバージョンの制御

プロバイダのバージョンを制御することもできます。これは、 Terraform 設定の required_providers ブロックによって制御されます。

構文は次のとおりです。

[source, cli]
----
terraform {
  required_providers {
    netapp-cloudmanager = {
      source = "NetApp/netapp-cloudmanager"
      version = ">= 23.0.0"
    }
  }
}
----
プロバイダバージョン管理の詳細については、こちらをご覧ください。



== 実行中の特定のモジュール

.AWS
[%collapsible]
====
[role="tabbed-block"]
=====
.CVO シングルノードの導入
--
.AWSにNetApp CVO（シングルノードインスタンス）を導入するためのTerraform構成ファイル
このセクションでは、 AWS （ Amazon Web Services ）上でシングルノードの NetApp CVO （ Cloud Volumes ONTAP ）を導入 / 構成するための、さまざまな Terraform 構成ファイルを提供しています。

Terraformドキュメント： https://registry.terraform.io/providers/NetApp/netapp-cloudmanager/latest/docs[]

.手順
テンプレートを実行するには、次の手順を実行します。

. リポジトリをクローニングします。
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. 目的のフォルダに移動します
+
[source, cli]
----
    cd na_cloud_volumes_automation/
----
. CLI から AWS クレデンシャルを設定する。
+
[source, cli]
----
    aws configure
----
+
** AWS アクセスキー ID [None] ：アクセスキー
** AWS Secret Access Key [None] ： secretkey
** デフォルトのリージョン名 [None] ： us-west-2
** デフォルトの出力形式は [None] ： json です


. の変数値を更新します。 `vars/aws_cvo_single_node_deployment.tfvar`
+

NOTE: 変数「 AWS_Connector_deploy_bool 」の値を true または false に設定することで、コネクタを導入することができます。

. Terraform リポジトリを初期化して、すべての前提条件をインストールし、導入の準備をします。
+
[source, cli]
----
    terraform init
----
. terraform validate コマンドを使用して、 terraform ファイルを確認します。
+
[source, cli]
----
    terraform validate
----
. 設定を事前に実行して、導入で想定されるすべての変更をプレビューします。
+
[source, cli]
----
    terraform plan -target="module.aws_sn" -var-file="vars/aws_cvo_single_node_deployment.tfvars"
----
. 導入を実行
+
[source, cli]
----
    terraform apply -target="module.aws_sn" -var-file="vars/aws_cvo_single_node_deployment.tfvars"
----


展開を削除します

[source, cli]
----
    terraform destroy
----
.降水量：
`Connector`

NetApp AWS Connector インスタンスの CVO 導入用の Terraform 変数。

[cols="20%, 10%, 70%"]
|===
| * 名前 * | * タイプ * | * 概要 * 


| * AWS_Connector_deploy_bool * | ブール値 | （必須）コネクタの配置を確認します。 


| * AWS_Connector_name* | 文字列 | （必須） Cloud Manager Connector の名前。 


| * AWS_connector_region * | 文字列 | （必須） Cloud Manager Connector を作成するリージョン。 


| * AWS_Connector_key_name* | 文字列 | （必須）コネクタインスタンスに使用するキーペアの名前。 


| * AWS_connector_company * | 文字列 | （必須）ユーザの会社名。 


| * AWS_Connector_instance_type * | 文字列 | （必須）インスタンスのタイプ（ t3.xlarge など）。少なくとも 4 つの CPU と 16 GB のメモリが必要です。 


| * AWS_connector_subnet_id * | 文字列 | （必須）インスタンスのサブネットの ID 。 


| * AWS_Connector_security_group_id * | 文字列 | （必須）インスタンスのセキュリティグループの ID 。複数のセキュリティグループをで区切って指定できます。 


| * AWS_Connector_iAM_instance_profile_name * | 文字列 | （必須）コネクタのインスタンスプロファイルの名前。 


| * AWS_Connector_account_id * | 文字列 | （オプション）コネクタを関連付けるネットアップアカウントの ID 。指定しない場合、 Cloud Manager は最初のアカウントを使用します。アカウントが存在しない場合、 Cloud Manager は新しいアカウントを作成します。アカウントIDは、Cloud Managerの[Account]タブで確認できます https://cloudmanager.netapp.com[]。 


| * AWS_connector_public_ip_bool * | ブール値 | （任意）インスタンスにパブリック IP アドレスを関連付けるかどうかを指定します。指定しない場合は、サブネットの設定に基づいて関連付けが行われます。 
|===
`Single Node Instance`

単一の NetApp CVO インスタンスの Terraform 変数。

[cols="20%, 10%, 70%"]
|===
| * 名前 * | * タイプ * | * 概要 * 


| * CVO-NAME * | 文字列 | （必須） Cloud Volumes ONTAP 作業環境の名前。 


| * CVF_REGION * | 文字列 | （必須）作業環境を作成するリージョン。 


| * CVO-subnet_id * | 文字列 | （必須）作業環境を作成するサブネット ID 。 


| * CVO-vPC_id * | 文字列 | （オプション）作業環境を作成する VPC ID 。この引数を指定しない場合は、指定したサブネット ID を使用して VPC が計算されます。 


| * CVO-svm_password* をクリックします | 文字列 | （必須） Cloud Volumes ONTAP の管理パスワード。 


| * CVF_Writing _speed_state * | 文字列 | （オプション） Cloud Volumes ONTAP の書き込み速度設定： [ 「 normal 」、「 high 」。デフォルトは「 normal 」です。 
|===
--
.CVO HA の導入
--
.NetApp CVO（HAペア）をAWSに導入するための構成ファイルをTerraformしています
このセクションでは、 AWS （ Amazon Web Services ）のハイアベイラビリティペアに NetApp CVO （ Cloud Volumes ONTAP ）を導入 / 構成するための、さまざまな Terraform 構成ファイルを提供しています。

Terraformドキュメント： https://registry.terraform.io/providers/NetApp/netapp-cloudmanager/latest/docs[]

.手順
テンプレートを実行するには、次の手順を実行します。

. リポジトリをクローニングします。
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. 目的のフォルダに移動します
+
[source, cli]
----
    cd na_cloud_volumes_automation/
----
. CLI から AWS クレデンシャルを設定する。
+
[source, cli]
----
    aws configure
----
+
** AWS アクセスキー ID [None] ：アクセスキー
** AWS Secret Access Key [None] ： secretkey
** デフォルトのリージョン名 [None] ： us-west-2
** デフォルトの出力形式は [None] ： json です


. の変数値を更新し `vars/aws_cvo_ha_deployment.tfvars`ます。
+

NOTE: 変数「 AWS_Connector_deploy_bool 」の値を true または false に設定することで、コネクタを導入することができます。

. Terraform リポジトリを初期化して、すべての前提条件をインストールし、導入の準備をします。
+
[source, cli]
----
      terraform init
----
. terraform validate コマンドを使用して、 terraform ファイルを確認します。
+
[source, cli]
----
    terraform validate
----
. 設定を事前に実行して、導入で想定されるすべての変更をプレビューします。
+
[source, cli]
----
    terraform plan -target="module.aws_ha" -var-file="vars/aws_cvo_ha_deployment.tfvars"
----
. 導入を実行
+
[source, cli]
----
    terraform apply -target="module.aws_ha" -var-file="vars/aws_cvo_ha_deployment.tfvars"
----


展開を削除します

[source, cli]
----
    terraform destroy
----
.降水量：
`Connector`

NetApp AWS Connector インスタンスの CVO 導入用の Terraform 変数。

[cols="20%, 10%, 70%"]
|===
| * 名前 * | * タイプ * | * 概要 * 


| * AWS_Connector_deploy_bool * | ブール値 | （必須）コネクタの配置を確認します。 


| * AWS_Connector_name* | 文字列 | （必須） Cloud Manager Connector の名前。 


| * AWS_connector_region * | 文字列 | （必須） Cloud Manager Connector を作成するリージョン。 


| * AWS_Connector_key_name* | 文字列 | （必須）コネクタインスタンスに使用するキーペアの名前。 


| * AWS_connector_company * | 文字列 | （必須）ユーザの会社名。 


| * AWS_Connector_instance_type * | 文字列 | （必須）インスタンスのタイプ（ t3.xlarge など）。少なくとも 4 つの CPU と 16 GB のメモリが必要です。 


| * AWS_connector_subnet_id * | 文字列 | （必須）インスタンスのサブネットの ID 。 


| * AWS_Connector_security_group_id * | 文字列 | （必須）インスタンスのセキュリティグループの ID 。複数のセキュリティグループをで区切って指定できます。 


| * AWS_Connector_iAM_instance_profile_name * | 文字列 | （必須）コネクタのインスタンスプロファイルの名前。 


| * AWS_Connector_account_id * | 文字列 | （オプション）コネクタを関連付けるネットアップアカウントの ID 。指定しない場合、 Cloud Manager は最初のアカウントを使用します。アカウントが存在しない場合、 Cloud Manager は新しいアカウントを作成します。アカウントIDは、Cloud Managerの[Account]タブで確認できます https://cloudmanager.netapp.com[]。 


| * AWS_connector_public_ip_bool * | ブール値 | （任意）パブリックIPアドレスをインスタンスに関連付けるかどうかを指定します。指定しない場合は、サブネットの設定に基づいて関連付けが行われます。 
|===
`HA Pair`

HA ペアの NetApp CVO インスタンスの変数はテラフォームされます。

[cols="20%, 10%, 70%"]
|===
| * 名前 * | * タイプ * | * 概要 * 


| * CVO-is_HA * | ブール値 | （オプション）作業環境が HA ペアであるかどうかを示します（ [true 、 false] ）。デフォルトはfalseです。 


| * CVO-NAME * | 文字列 | （必須） Cloud Volumes ONTAP 作業環境の名前。 


| * CVF_REGION * | 文字列 | （必須）作業環境を作成するリージョン。 


| * cvo_node1_subnet_id* | 文字列 | （必須）最初のノードを作成するサブネット ID 。 


| * cvo_node2_subnet_id* | 文字列 | （必須） 2 つ目のノードを作成するサブネット ID 。 


| * CVO-vPC_id * | 文字列 | （オプション）作業環境を作成する VPC ID 。この引数を指定しない場合は、指定したサブネット ID を使用して VPC が計算されます。 


| * CVO-svm_password* をクリックします | 文字列 | （必須） Cloud Volumes ONTAP の管理パスワード。 


| * CVF_Failover_mode * | 文字列 | （任意） HA の場合、 HA ペアのフェイルオーバーモード： [PrivateIP] 、 [FloatingIP] 。「 PrivateIP 」は 1 つのアベイラビリティゾーン用で、「 FloatingIP 」は複数のアベイラビリティゾーン用です。 


| * CVO-mediator_subnet_id * | 文字列 | （オプション） HA の場合は、メディエーターのサブネット ID 。 


| * CVO-mediator_key_pair_name * | 文字列 | （オプション） HA の場合は、メディエーターインスタンスのキーペアの名前。 


| * CVO-cluster_floating_IP * | 文字列 | （任意） HA FloatingIP の場合、クラスタ管理のフローティング IP アドレス。 


| * CVO-data_floating_IP * | 文字列 | （任意） HA FloatingIP の場合は、データフローティング IP アドレス。 


| * cvo_data_floating_ip2* | 文字列 | （任意） HA FloatingIP の場合は、データフローティング IP アドレス。 


| * CVO-SVM_floating_IP * | 文字列 | （オプション） HA FloatingIP の場合、 SVM 管理のフローティング IP アドレス。 


| * CVO-ROT_ROTLE_IDS* | リスト | （任意） HA FloatingIP の場合、フローティング IP で更新されるルートテーブル ID のリスト。 
|===
--
.FSX の導入
--
.NetApp ONTAP FSXをAWSに導入するためのTerraform構成ファイル
このセクションには、 AWS （ Amazon Web Services ）上で NetApp ONTAP FSX を導入 / 設定するための、さまざまな Terraform 構成ファイルが含まれています。

Terraformドキュメント： https://registry.terraform.io/providers/NetApp/netapp-cloudmanager/latest/docs[]

.手順
テンプレートを実行するには、次の手順を実行します。

. リポジトリをクローニングします。
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. 目的のフォルダに移動します
+
[source, cli]
----
    cd na_cloud_volumes_automation/
----
. CLI から AWS クレデンシャルを設定する。
+
[source, cli]
----
    aws configure
----
+
** AWS アクセスキー ID [None] ：アクセスキー
** AWS Secret Access Key [None] ： secretkey
** デフォルトのリージョン名 [None] ： us-west-2
** デフォルトの出力形式 [None] ：


. の変数値を更新します。 `vars/aws_fsx_deployment.tfvars`
+

NOTE: 変数「 AWS_Connector_deploy_bool 」の値を true または false に設定することで、コネクタを導入することができます。

. Terraform リポジトリを初期化して、すべての前提条件をインストールし、導入の準備をします。
+
[source, cli]
----
    terraform init
----
. terraform validate コマンドを使用して、 terraform ファイルを確認します。
+
[source, cli]
----
    terraform validate
----
. 設定を事前に実行して、導入で想定されるすべての変更をプレビューします。
+
[source, cli]
----
    terraform plan -target="module.aws_fsx" -var-file="vars/aws_fsx_deployment.tfvars"
----
. 導入を実行
+
[source, cli]
----
    terraform apply -target="module.aws_fsx" -var-file="vars/aws_fsx_deployment.tfvars"
----


展開を削除します

[source, cli]
----
    terraform destroy
----
.レシピ：
`Connector`

NetApp AWS Connector インスタンスの Terraform 変数。

[cols="20%, 10%, 70%"]
|===
| * 名前 * | * タイプ * | * 概要 * 


| * AWS_Connector_deploy_bool * | ブール値 | （必須）コネクタの配置を確認します。 


| * AWS_Connector_name* | 文字列 | （必須） Cloud Manager Connector の名前。 


| * AWS_connector_region * | 文字列 | （必須） Cloud Manager Connector を作成するリージョン。 


| * AWS_Connector_key_name* | 文字列 | （必須）コネクタインスタンスに使用するキーペアの名前。 


| * AWS_connector_company * | 文字列 | （必須）ユーザの会社名。 


| * AWS_Connector_instance_type * | 文字列 | （必須）インスタンスのタイプ（ t3.xlarge など）。少なくとも 4 つの CPU と 16 GB のメモリが必要です。 


| * AWS_connector_subnet_id * | 文字列 | （必須）インスタンスのサブネットの ID 。 


| * AWS_Connector_security_group_id * | 文字列 | （必須）インスタンスのセキュリティグループの ID 。複数のセキュリティグループをで区切って指定できます。 


| * AWS_Connector_iAM_instance_profile_name * | 文字列 | （必須）コネクタのインスタンスプロファイルの名前。 


| * AWS_Connector_account_id * | 文字列 | （オプション）コネクタを関連付けるネットアップアカウントの ID 。指定しない場合、 Cloud Manager は最初のアカウントを使用します。アカウントが存在しない場合、 Cloud Manager は新しいアカウントを作成します。アカウントIDは、Cloud Managerの[Account]タブで確認できます https://cloudmanager.netapp.com[]。 


| * AWS_connector_public_ip_bool * | ブール値 | （任意）パブリックIPアドレスをインスタンスに関連付けるかどうかを指定します。指定しない場合は、サブネットの設定に基づいて関連付けが行われます。 
|===
`FSx Instance`

NetApp ONTAP FSX インスタンスの Terraform 変数。

[cols="20%, 10%, 70%"]
|===
| * 名前 * | * タイプ * | * 概要 * 


| * FSX_NAME* | 文字列 | （必須） Cloud Volumes ONTAP 作業環境の名前。 


| * FSX_REGION * | 文字列 | （必須）作業環境を作成するリージョン。 


| * FSX_primary_subnet_id * | 文字列 | （必須）作業環境を作成するプライマリサブネット ID 。 


| * fsx_secondary_subnet_id * | 文字列 | （必須）作業環境を作成するセカンダリサブネット ID 。 


| * fsx_account_id * | 文字列 | （必須） FSX インスタンスを関連付けるネットアップアカウントの ID 。指定しない場合、 Cloud Manager は最初のアカウントを使用します。アカウントが存在しない場合、 Cloud Manager は新しいアカウントを作成します。アカウントIDは、Cloud Managerの[Account]タブで確認できます https://cloudmanager.netapp.com[]。 


| * FSX_workspace_id * | 文字列 | （必須）作業環境の Cloud Manager ワークスペースの ID 。 


| * FSX_admin_password * | 文字列 | （必須） Cloud Volumes ONTAP の管理パスワード。 


| * FSX_Throughput _capacity * | 文字列 | （任意）スループットの容量。 


| * FSX_storage_capacity_size * | 文字列 | （オプション）最初のデータアグリゲートの EBS ボリュームサイズGB の場合、単位は [100 または 500] です。TB の場合、単位は [1,2,4,8,16] です。デフォルトは「 1 」です。 


| * FSX_storage_capacity_size_unit * | 文字列 | （オプション） ['GB' または 'TB'] 。デフォルトは「 TB 」です。 


| * FSX_cloudmanager_aws _credential _name * | 文字列 | （必須） AWS クレデンシャルアカウント名。 
|===
--
=====
====
.Azure
[%collapsible]
====
[role="tabbed-block"]
=====
.ANF
--
.AzureにANFボリュームを導入するための環境設定ファイルを用意しています
このセクションでは、 Azure に ANF （ Azure NetApp Files ）ボリュームを導入 / 設定するためのさまざまな Terraform 設定ファイルを示します。

Terraformドキュメント： https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs[]

.手順
テンプレートを実行するには、次の手順を実行します。

. リポジトリをクローニングします。
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. 目的のフォルダに移動します
+
[source, cli]
----
    cd na_cloud_volumes_automation
----
. Azure CLI にログインします（ Azure CLI がインストールされている必要があります）。
+
[source, cli]
----
    az login
----
. の変数値を更新し `vars/azure_anf.tfvars`ます。
+

NOTE: 既存の VNet およびサブネットを使用して ANF ボリュームを導入することもできます。変数「 vnet_creation_bool 」と「 subnet_creation_bool 」の値を false に設定し、「 subnet_id_for _anf_vol 」を指定します。これらの値を true に設定して新しい VNet とサブネットを作成する場合にも、新しく作成したサブネットからサブネット ID が自動的に取得されます。

. Terraform リポジトリを初期化して、すべての前提条件をインストールし、導入の準備をします。
+
[source, cli]
----
    terraform init
----
. terraform validate コマンドを使用して、 terraform ファイルを確認します。
+
[source, cli]
----
    terraform validate
----
. 設定を事前に実行して、導入で想定されるすべての変更をプレビューします。
+
[source, cli]
----
    terraform plan -target="module.anf" -var-file="vars/azure_anf.tfvars"
----
. 導入を実行
+
[source, cli]
----
    terraform apply -target="module.anf" -var-file="vars/azure_anf.tfvars"
----


展開を削除します

[source, cli]
----
  terraform destroy
----
.降水量：
`Single Node Instance`

単一のネットアップ ANF ボリュームに対応する Terraform 変数。

[cols="20%, 10%, 70%"]
|===
| * 名前 * | * タイプ * | * 概要 * 


| * AZ_location* | 文字列 | （必須）リソースが存在する、サポートされている Azure の場所を指定します。これを変更すると、新しいリソースが強制的に作成されます。 


| * AZ_PREFIX * | 文字列 | （必須）ネットアップボリュームを作成するリソースグループの名前。これを変更すると、新しいリソースが強制的に作成されます。 


| * AZ_vnet_address_space * | 文字列 | （必須） ANF ボリューム導入用として新しく作成した VNet で使用するアドレススペースです。 


| * AZ_subnet_address_prefix * | 文字列 | （必須） ANF ボリューム導入用に新しく作成した VNet で使用するサブネットアドレスプレフィックスです。 


| * AZ_volume_path * | 文字列 | （必須）ボリュームの一意のファイルパス。マウントターゲットの作成時に使用します。これを変更すると、新しいリソースが強制的に作成されます。 


| * az _capacity_pool_size * | 整数 | （必須）容量プールサイズ（ TB ）。 


| * az_vnet_creation_bool * | ブーリアン | （必須）新しいVNetを作成する場合は、このブール値をに設定します `true`。既存のVNetを使用する場合は、に設定し `false`ます。 


| * az_subnet_creation_bool * | ブーリアン | （必須）新しいサブネットを作成するには、このブーリアンをに設定します `true`。既存のサブネットを使用する場合は、に設定します `false`。 


| * az _subnet_id_for _anf_vol * | 文字列 | （必須）trueに設定して既存のサブネットを使用する場合は、サブネットIDを指定し `subnet_creation_bool`ます。false に設定する場合は、デフォルト値のままにします。 


| * AZ_NetApp_POOL_SERVICE_LEVEL * | 文字列 | （必須）ファイルシステムのターゲットパフォーマンス。有効な値は `Premium`、 `Standard`、または `Ultra`です。 


| * AZ_NetApp_vol_SERVICE_LEVEL * | 文字列 | （必須）ファイルシステムのターゲットパフォーマンス。有効な値は `Premium`、 `Standard`、または `Ultra`です。 


| * AZ_NetApp_vol_protocol * | 文字列 | （オプション）リストで表されるターゲットボリュームプロトコル。サポートされる単一の値は `CIFS`、 `NFSv3`、または `NFSv4.1`です。引数が定義されていない場合は、デフォルトでになり `NFSv3`ます。これを変更すると、新しいリソースが強制的に作成され、データが失われます。 


| * AZ_NetApp_vol_security_style * | 文字列 | （オプション）ボリュームのセキュリティ形式。指定できる値は、または `Ntfs`です `Unix`。指定しない場合、単一プロトコルボリュームが作成され、の場合は `NFSv3`デフォルトで、 `NFSv4.1`の場合はvolume、の場合は `CIFS`デフォルトで `Ntfs`作成され `Unix`ます。デュアルプロトコルボリュームで指定しない場合、値はになります `Ntfs`。 


| * AZ_NetApp_vol_storage_quota * | 文字列 | （必須）ファイルシステムに許可される最大ストレージクォータ（ギガバイト単位）。 
|===

NOTE: 推奨されているとおり、このスクリプトは lifecycle引数を使用して `prevent_destroy`、構成ファイル内の偶発的なデータ損失の可能性を軽減します。lifecycle引数の詳細については `prevent_destroy`、terraformのドキュメントを参照してください https://developer.hashicorp.com/terraform/tutorials/state/resource-lifecycle#prevent-resource-deletion[]。

--
.ANF データ保護
--
.Azure上にデータ保護機能を備えたANFボリュームを導入するための構成ファイルを用意しています
このセクションでは、 Azure でデータ保護を使用して ANF （ Azure NetApp Files ）ボリュームを導入 / 設定するためのさまざまな Terraform 設定ファイルについて説明します。

Terraformドキュメント： https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs[]

.手順
テンプレートを実行するには、次の手順を実行します。

. リポジトリをクローニングします。
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. 目的のフォルダに移動します
+
[source, cli]
----
    cd na_cloud_volumes_automation
----
. Azure CLI にログインします（ Azure CLI がインストールされている必要があります）。
+
[source, cli]
----
    az login
----
. の変数値を更新し `vars/azure_anf_data_protection.tfvars`ます。
+

NOTE: 既存の VNet およびサブネットを使用して ANF ボリュームを導入することもできます。変数「 vnet_creation_bool 」と「 subnet_creation_bool 」の値を false に設定し、「 subnet_id_for _anf_vol 」を指定します。これらの値を true に設定して新しい VNet とサブネットを作成する場合にも、新しく作成したサブネットからサブネット ID が自動的に取得されます。

. Terraform リポジトリを初期化して、すべての前提条件をインストールし、導入の準備をします。
+
[source, cli]
----
    terraform init
----
. terraform validate コマンドを使用して、 terraform ファイルを確認します。
+
[source, cli]
----
    terraform validate
----
. 設定を事前に実行して、導入で想定されるすべての変更をプレビューします。
+
[source, cli]
----
    terraform plan -target="module.anf_data_protection" -var-file="vars/azure_anf_data_protection.tfvars"
----
. 導入を実行
+
[source, cli]
----
    terraform apply -target="module.anf_data_protection" -var-file="vars/azure_anf_data_protection.tfvars
----


展開を削除します

[source, cli]
----
  terraform destroy
----
.降水量：
`ANF Data Protection`

データ保護が有効になっている単一の ANF ボリューム用の変数を Terraform します。

[cols="20%, 10%, 70%"]
|===
| * 名前 * | * タイプ * | * 概要 * 


| * AZ_location* | 文字列 | （必須）リソースが存在する、サポートされている Azure の場所を指定します。これを変更すると、新しいリソースが強制的に作成されます。 


| * AZ_alt_location * | 文字列 | （必須）セカンダリボリュームを作成する Azure の場所 


| * AZ_PREFIX * | 文字列 | （必須）ネットアップボリュームを作成するリソースグループの名前。これを変更すると、新しいリソースが強制的に作成されます。 


| * AZ_vnet_primary_address_space * | 文字列 | （必須） ANF プライマリボリューム導入用として新しく作成した VNet が使用するアドレススペース。 


| * AZ_vnet_secondary_address_space * | 文字列 | （必須） ANF セカンダリボリューム導入用として新しく作成した VNet が使用するアドレススペース。 


| * AZ_subnet_primary_address_prefix * | 文字列 | （必須） ANF プライマリボリューム導入用に新しく作成した VNet で使用するサブネットアドレスプレフィックスです。 


| * AZ_subnet_secondary_address_prefix * | 文字列 | （必須） ANF セカンダリボリューム導入用に新しく作成した VNet で使用するサブネットアドレスプレフィックスです。 


| * AZ_volume_path_primary * | 文字列 | （必須）プライマリボリュームの一意のファイルパス。マウントターゲットの作成時に使用します。これを変更すると、新しいリソースが強制的に作成されます。 


| * AZ_volume_path_secondary * | 文字列 | （必須）セカンダリボリュームの一意のファイルパス。マウントターゲットの作成時に使用します。これを変更すると、新しいリソースが強制的に作成されます。 


| * AZ_capacity pool_size_primary * | 整数 | （必須）容量プールサイズ（ TB ）。 


| * AZ_capacity pool_size_secondary * | 整数 | （必須）容量プールサイズ（ TB ）。 


| * az_vnet_primary_creation_bool * | ブーリアン | （必須）プライマリボリュームの新しいVNetを作成する場合は、このブーリアンをに設定します `true`。既存のVNetを使用する場合は、に設定し `false`ます。 


| * az_vnet_secondary_creation_bool * | ブーリアン | （必須）セカンダリボリュームの新しいVNetを作成する場合は、このブーリアンをに設定します `true`。既存のVNetを使用する場合は、に設定し `false`ます。 


| * az_subnet_primary_creation_bool * | ブーリアン | （必須）プライマリボリュームの新しいサブネットを作成する場合は、このブーリアンをに設定します `true`。既存のサブネットを使用する場合は、に設定します `false`。 


| * az_subnet_secondary_creation_bool * | ブーリアン | （必須）セカンダリボリュームの新しいサブネットを作成する場合は、このブーリアンをに設定します `true`。既存のサブネットを使用する場合は、に設定します `false`。 


| * az _primary_subnet_id_for _anf_vol * | 文字列 | （必須）trueに設定して既存のサブネットを使用する場合は、サブネットIDを指定し `subnet_primary_creation_bool`ます。false に設定する場合は、デフォルト値のままにします。 


| * AZ_SECONDARY _subnet_id_on_anf_vol * | 文字列 | （必須）trueに設定して既存のサブネットを使用する場合は、サブネットIDを指定し `subnet_secondary_creation_bool`ます。false に設定する場合は、デフォルト値のままにします。 


| * AZ_NetApp_POOL_SERVICE_LEVEL_PRIMARY * | 文字列 | （必須）ファイルシステムのターゲットパフォーマンス。有効な値は `Premium`、 `Standard`、または `Ultra`です。 


| * AZ_NetApp_POOL_SERVICE_LEVEL_SECONDARY * | 文字列 | （必須）ファイルシステムのターゲットパフォーマンス。有効な値は `Premium`、 `Standard`、または `Ultra`です。 


| * AZ_NetApp_vol_SERVICE_LEVEL_PRIMARY * | 文字列 | （必須）ファイルシステムのターゲットパフォーマンス。有効な値は `Premium`、 `Standard`、または `Ultra`です。 


| * AZ_NetApp_vol_SERVICE_LEVEL_SECONDARY * | 文字列 | （必須）ファイルシステムのターゲットパフォーマンス。有効な値は `Premium`、 `Standard`、または `Ultra`です。 


| * AZ_NetApp_vol_protocol_primary * | 文字列 | （オプション）リストで表されるターゲットボリュームプロトコル。サポートされる単一の値は `CIFS`、 `NFSv3`、または `NFSv4.1`です。引数が定義されていない場合は、デフォルトでになり `NFSv3`ます。これを変更すると、新しいリソースが強制的に作成され、データが失われます。 


| * AZ_NetApp_vol_protocol_secondary * | 文字列 | （オプション）リストで表されるターゲットボリュームプロトコル。サポートされる単一の値は `CIFS`、 `NFSv3`、または `NFSv4.1`です。引数が定義されていない場合は、デフォルトでになり `NFSv3`ます。これを変更すると、新しいリソースが強制的に作成され、データが失われます。 


| * AZ_NetApp_vol_storage_quota_policy_primary * | 文字列 | （必須）ファイルシステムに許可される最大ストレージクォータ（ギガバイト単位）。 


| * AZ_NetApp_vol_storage_QUOTA_SECONDARY * | 文字列 | （必須）ファイルシステムに許可される最大ストレージクォータ（ギガバイト単位）。 


| * AZ_DP_replication_frequency * | 文字列 | （必須）レプリケーション頻度。サポートされる値は `10minutes`、、 `hourly`、、 `daily`の値では大文字と小文字が区別されます。 
|===

NOTE: 推奨されているとおり、このスクリプトは lifecycle引数を使用して `prevent_destroy`、構成ファイル内の偶発的なデータ損失の可能性を軽減します。lifecycle引数の詳細については `prevent_destroy`、terraformのドキュメントを参照してください https://developer.hashicorp.com/terraform/tutorials/state/resource-lifecycle#prevent-resource-deletion[]。

--
.ANF デュアルプロトコル
--
.Azure上にデュアルプロトコルを使用してANFボリュームを導入するための構成ファイルが用意されています
このセクションでは、 Azure でデュアルプロトコルを有効にした ANF （ Azure NetApp Files ）ボリュームを導入 / 設定するためのさまざまな Terraform 設定ファイルについて説明します。

Terraformドキュメント： https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs[]

.手順
テンプレートを実行するには、次の手順を実行します。

. リポジトリをクローニングします。
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. 目的のフォルダに移動します
+
[source, cli]
----
    cd na_cloud_volumes_automation
----
. Azure CLI にログインします（ Azure CLI がインストールされている必要があります）。
+
[source, cli]
----
    az login
----
. の変数値を更新し `vars/azure_anf_dual_protocol.tfvars`ます。
+

NOTE: 既存の VNet およびサブネットを使用して ANF ボリュームを導入することもできます。変数「 vnet_creation_bool 」と「 subnet_creation_bool 」の値を false に設定し、「 subnet_id_for _anf_vol 」を指定します。これらの値を true に設定して新しい VNet とサブネットを作成する場合にも、新しく作成したサブネットからサブネット ID が自動的に取得されます。

. Terraform リポジトリを初期化して、すべての前提条件をインストールし、導入の準備をします。
+
[source, cli]
----
    terraform init
----
. terraform validate コマンドを使用して、 terraform ファイルを確認します。
+
[source, cli]
----
    terraform validate
----
. 設定を事前に実行して、導入で想定されるすべての変更をプレビューします。
+
[source, cli]
----
    terraform plan -target="module.anf_dual_protocol" -var-file="vars/azure_anf_dual_protocol.tfvars"
----
. 導入を実行
+
[source, cli]
----
    terraform apply -target="module.anf_dual_protocol" -var-file="vars/azure_anf_dual_protocol.tfvars"
----


展開を削除します

[source, cli]
----
  terraform destroy
----
.降水量：
`Single Node Instance`

デュアルプロトコルが有効な単一の ANF ボリューム用の Terraform 変数。

[cols="20%, 10%, 70%"]
|===
| * 名前 * | * タイプ * | * 概要 * 


| * AZ_location* | 文字列 | （必須）リソースが存在する、サポートされている Azure の場所を指定します。これを変更すると、新しいリソースが強制的に作成されます。 


| * AZ_PREFIX * | 文字列 | （必須）ネットアップボリュームを作成するリソースグループの名前。これを変更すると、新しいリソースが強制的に作成されます。 


| * AZ_vnet_address_space * | 文字列 | （必須） ANF ボリューム導入用として新しく作成した VNet で使用するアドレススペースです。 


| * AZ_subnet_address_prefix * | 文字列 | （必須） ANF ボリューム導入用に新しく作成した VNet で使用するサブネットアドレスプレフィックスです。 


| * AZ_volume_path * | 文字列 | （必須）ボリュームの一意のファイルパス。マウントターゲットの作成時に使用します。これを変更すると、新しいリソースが強制的に作成されます。 


| * az _capacity_pool_size * | 整数 | （必須）容量プールサイズ（ TB ）。 


| * az_vnet_creation_bool * | ブーリアン | （必須）新しいVNetを作成する場合は、このブール値をに設定します `true`。既存のVNetを使用する場合は、に設定し `false`ます。 


| * az_subnet_creation_bool * | ブーリアン | （必須）新しいサブネットを作成するには、このブーリアンをに設定します `true`。既存のサブネットを使用する場合は、に設定します `false`。 


| * az _subnet_id_for _anf_vol * | 文字列 | （必須）trueに設定して既存のサブネットを使用する場合は、サブネットIDを指定し `subnet_creation_bool`ます。false に設定する場合は、デフォルト値のままにします。 


| * AZ_NetApp_POOL_SERVICE_LEVEL * | 文字列 | （必須）ファイルシステムのターゲットパフォーマンス。有効な値は `Premium`、 `Standard`、または `Ultra`です。 


| * AZ_NetApp_vol_SERVICE_LEVEL * | 文字列 | （必須）ファイルシステムのターゲットパフォーマンス。有効な値は `Premium`、 `Standard`、または `Ultra`です。 


| * az_netapp_vol_protocol1* | 文字列 | （必須）ターゲットボリュームプロトコル。リストで表されます。サポートされる単一の値は `CIFS`、 `NFSv3`、または `NFSv4.1`です。引数が定義されていない場合は、デフォルトでになり `NFSv3`ます。これを変更すると、新しいリソースが強制的に作成され、データが失われます。 


| * az_netapp_vol_protocol2* | 文字列 | （必須）ターゲットボリュームプロトコル。リストで表されます。サポートされる単一の値は `CIFS`、 `NFSv3`、または `NFSv4.1`です。引数が定義されていない場合は、デフォルトでになり `NFSv3`ます。これを変更すると、新しいリソースが強制的に作成され、データが失われます。 


| * AZ_NetApp_vol_storage_quota * | 文字列 | （必須）ファイルシステムに許可される最大ストレージクォータ（ギガバイト単位）。 


| * AZ_SMB_server_username * | 文字列 | （必須） ActiveDirectory オブジェクトを作成するユーザ名。 


| * AZ_SMB_server_password * | 文字列 | （必須） ActiveDirectory オブジェクトを作成するためのユーザパスワード。 


| * AZ_SMB_SERVER_NAME* | 文字列 | （必須） ActiveDirectory オブジェクトを作成するサーバ名。 


| * AZ_SMB_DNS_servers * | 文字列 | （必須） ActiveDirectory オブジェクトを作成するための DNS サーバ IP 。 
|===

NOTE: 推奨されているとおり、このスクリプトは lifecycle引数を使用して `prevent_destroy`、構成ファイル内の偶発的なデータ損失の可能性を軽減します。lifecycle引数の詳細については `prevent_destroy`、terraformのドキュメントを参照してください https://developer.hashicorp.com/terraform/tutorials/state/resource-lifecycle#prevent-resource-deletion[]。

--
.Snapshot からの ANF ボリューム
--
.Azure上のSnapshotからANFボリュームを導入するための構成ファイルをテラフォームしてください
このセクションでは、 Azure 上の Snapshot から ANF （ Azure NetApp Files ）ボリュームを導入 / 設定するためのさまざまな Terraform 設定ファイルを示します。

Terraformドキュメント： https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs[]

.手順
テンプレートを実行するには、次の手順を実行します。

. リポジトリをクローニングします。
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. 目的のフォルダに移動します
+
[source, cli]
----
    cd na_cloud_volumes_automation
----
. Azure CLI にログインします（ Azure CLI がインストールされている必要があります）。
+
[source, cli]
----
    az login
----
. の変数値を更新し `vars/azure_anf_volume_from_snapshot.tfvars`ます。



NOTE: 既存の VNet およびサブネットを使用して ANF ボリュームを導入することもできます。変数「 vnet_creation_bool 」と「 subnet_creation_bool 」の値を false に設定し、「 subnet_id_for _anf_vol 」を指定します。これらの値を true に設定して新しい VNet とサブネットを作成する場合にも、新しく作成したサブネットからサブネット ID が自動的に取得されます。

. Terraform リポジトリを初期化して、すべての前提条件をインストールし、導入の準備をします。
+
[source, cli]
----
    terraform init
----
. terraform validate コマンドを使用して、 terraform ファイルを確認します。
+
[source, cli]
----
    terraform validate
----
. 設定を事前に実行して、導入で想定されるすべての変更をプレビューします。
+
[source, cli]
----
    terraform plan -target="module.anf_volume_from_snapshot" -var-file="vars/azure_anf_volume_from_snapshot.tfvars"
----
. 導入を実行
+
[source, cli]
----
    terraform apply -target="module.anf_volume_from_snapshot" -var-file="vars/azure_anf_volume_from_snapshot.tfvars"
----


展開を削除します

[source, cli]
----
  terraform destroy
----
.降水量：
`Single Node Instance`

Snapshot を使用する単一の ANF ボリューム用の変数を Terraform します。

[cols="20%, 10%, 70%"]
|===
| * 名前 * | * タイプ * | * 概要 * 


| * AZ_location* | 文字列 | （必須）リソースが存在する、サポートされている Azure の場所を指定します。これを変更すると、新しいリソースが強制的に作成されます。 


| * AZ_PREFIX * | 文字列 | （必須）ネットアップボリュームを作成するリソースグループの名前。これを変更すると、新しいリソースが強制的に作成されます。 


| * AZ_vnet_address_space * | 文字列 | （必須） ANF ボリューム導入用として新しく作成した VNet で使用するアドレススペースです。 


| * AZ_subnet_address_prefix * | 文字列 | （必須） ANF ボリューム導入用に新しく作成した VNet で使用するサブネットアドレスプレフィックスです。 


| * AZ_volume_path * | 文字列 | （必須）ボリュームの一意のファイルパス。マウントターゲットの作成時に使用します。これを変更すると、新しいリソースが強制的に作成されます。 


| * az _capacity_pool_size * | 整数 | （必須）容量プールサイズ（ TB ）。 


| * az_vnet_creation_bool * | ブーリアン | （必須）新しいVNetを作成する場合は、このブール値をに設定します `true`。既存のVNetを使用する場合は、に設定し `false`ます。 


| * az_subnet_creation_bool * | ブーリアン | （必須）新しいサブネットを作成するには、このブーリアンをに設定します `true`。既存のサブネットを使用する場合は、に設定します `false`。 


| * az _subnet_id_for _anf_vol * | 文字列 | （必須）trueに設定して既存のサブネットを使用する場合は、サブネットIDを指定し `subnet_creation_bool`ます。false に設定する場合は、デフォルト値のままにします。 


| * AZ_NetApp_POOL_SERVICE_LEVEL * | 文字列 | （必須）ファイルシステムのターゲットパフォーマンス。有効な値は `Premium`、 `Standard`、または `Ultra`です。 


| * AZ_NetApp_vol_SERVICE_LEVEL * | 文字列 | （必須）ファイルシステムのターゲットパフォーマンス。有効な値は `Premium`、 `Standard`、または `Ultra`です。 


| * AZ_NetApp_vol_protocol * | 文字列 | （オプション）リストで表されるターゲットボリュームプロトコル。サポートされる単一の値は `CIFS`、 `NFSv3`、または `NFSv4.1`です。引数が定義されていない場合は、デフォルトでになり `NFSv3`ます。これを変更すると、新しいリソースが強制的に作成され、データが失われます。 


| * AZ_NetApp_vol_storage_quota * | 文字列 | （必須）ファイルシステムに許可される最大ストレージクォータ（ギガバイト単位）。 


| * AZ_SNAPSHOT_ID * | 文字列 | （必須）新しい ANF ボリュームを作成する際に使用する Snapshot ID 。 
|===

NOTE: 推奨されているとおり、このスクリプトは lifecycle引数を使用して `prevent_destroy`、構成ファイル内の偶発的なデータ損失の可能性を軽減します。lifecycle引数の詳細については `prevent_destroy`、terraformのドキュメントを参照してください https://developer.hashicorp.com/terraform/tutorials/state/resource-lifecycle#prevent-resource-deletion[]。

--
.CVO シングルノードの導入
--
.AzureにシングルノードのCVOを導入するための構成ファイルがTerraformに用意されています
このセクションでは、 Azure 上にシングルノード CVO （ Cloud Volumes ONTAP ）を導入 / 構成するための各種 Terraform 構成ファイルを紹介します。

Terraformドキュメント： https://registry.terraform.io/providers/NetApp/netapp-cloudmanager/latest/docs[]

.手順
テンプレートを実行するには、次の手順を実行します。

. リポジトリをクローニングします。
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. 目的のフォルダに移動します
+
[source, cli]
----
    cd na_cloud_volumes_automation
----
. Azure CLI にログインします（ Azure CLI がインストールされている必要があります）。
+
[source, cli]
----
    az login
----
. の変数を更新し `vars\azure_cvo_single_node_deployment.tfvars`ます。
. Terraform リポジトリを初期化して、すべての前提条件をインストールし、導入の準備をします。
+
[source, cli]
----
    terraform init
----
. terraform validate コマンドを使用して、 terraform ファイルを確認します。
+
[source, cli]
----
    terraform validate
----
. 設定を事前に実行して、導入で想定されるすべての変更をプレビューします。
+
[source, cli]
----
    terraform plan -target="module.az_cvo_single_node_deployment" -var-file="vars\azure_cvo_single_node_deployment.tfvars"
----
. 導入を実行
+
[source, cli]
----
    terraform apply -target="module.az_cvo_single_node_deployment" -var-file="vars\azure_cvo_single_node_deployment.tfvars"
----


展開を削除します

[source, cli]
----
  terraform destroy
----
.降水量：
`Single Node Instance`

単一ノードの Cloud Volumes ONTAP （ CVO ）用の Terraform 変数。

[cols="20%, 10%, 70%"]
|===
| * 名前 * | * タイプ * | * 概要 * 


| * refresh_token * | 文字列 | （必須） NetApp Cloud Manager の更新トークン。これは NetApp Cloud Central から生成できます。 


| * AZ_Connector_name * | 文字列 | （必須） Cloud Manager Connector の名前。 


| * AZ_Connector_location * | 文字列 | （必須） Cloud Manager Connector を作成する場所。 


| * AZ_Connector_subscription_id * | 文字列 | （必須） Azure サブスクリプションの ID 。 


| * AZ_Connector_company * | 文字列 | （必須）ユーザの会社名。 


| * AZ_Connector_resource_group * | 整数 | （必須）リソースが作成される Azure 内のリソースグループ。 


| * AZ_Connector_subnet_id * | 文字列 | （必須）仮想マシンのサブネットの名前です。 


| * AZ_Connector_vnet_id * | 文字列 | （必須）仮想ネットワークの名前。 


| * AZ_Connector_network_security_group_name * | 文字列 | （必須）インスタンスのセキュリティグループの名前。 


| * AZ_Connector_associate_public_IP_address * | 文字列 | （必須）仮想マシンにパブリック IP アドレスを関連付けるかどうかを指定します。 


| * AZ_Connector_account_id * | 文字列 | （必須）コネクタを関連付けるネットアップアカウントの ID 。指定しない場合、 Cloud Manager は最初のアカウントを使用します。アカウントが存在しない場合、 Cloud Manager は新しいアカウントを作成します。アカウントIDは、Cloud Managerの[Account]タブで確認できます https://cloudmanager.netapp.com[]。 


| * AZ_Connector_admin_password * | 文字列 | （必須）コネクタのパスワード。 


| * AZ_Connector_admin_username* | 文字列 | （必須）コネクタのユーザ名。 


| * AZ_CVO-NAME * | 文字列 | （必須） Cloud Volumes ONTAP 作業環境の名前。 


| * AZ_CVF_location* | 文字列 | （必須）作業環境を作成する場所。 


| * AZ_CVO-subnet_id * | 文字列 | （必須） Cloud Volumes ONTAP システムのサブネットの名前。 


| * AZ_CVO-vnet_id * | 文字列 | （必須）仮想ネットワークの名前。 


| * AZ_CVO-vnet_resource_group * | 文字列 | （必須）仮想ネットワークに関連付けられた Azure 内のリソースグループ。 


| * AZ_CVO-data_encryption_type* | 文字列 | （必須）作業環境で使用する暗号化のタイプ： `AZURE`、 `NONE`]。デフォルトはです `AZURE`。 


| * AZ_CVO-storage_type * | 文字列 | （必須）最初のデータアグリゲートのストレージのタイプ： `Premium_LRS`、 `Standard_LRS`、 `StandardSSD_LRS`]。デフォルトはです。 `Premium_LRS` 


| * AZ_CVO-svm_svm_svm_name * をクリックします | 文字列 | （必須） Cloud Volumes ONTAP の管理パスワード。 


| * AZ_CVO-workspace_id * | 文字列 | （必須） Cloud Volumes ONTAP を導入する Cloud Manager ワークスペースの ID 。指定しない場合、 Cloud Manager は最初のワークスペースを使用します。IDは、の[ワークスペース]タブから確認できます https://cloudmanager.netapp.com[]。 


| * AZ_CVF_capacity _tier * | 文字列 | （必須）最初のデータアグリゲートでデータ階層化を有効にするかどうか：[`Blob`、 `NONE`]。デフォルトはです `BLOB`。 


| * AZ_CVF_Writing _speed_state * | 文字列 | （必須）Cloud Volumes ONTAP：、 `HIGH`]の書き込み速度設定 `NORMAL`。デフォルトはです `NORMAL`。この引数は HA ペアには関係ありません。 


| * AZ_CVF_ONTAP_VERSION * | 文字列 | （必須）必要な ONTAP のバージョン。「 use_latest_version 」が true に設定されている場合は無視されます。デフォルトでは最新バージョンが使用されます。 


| * AZ_CVF_INSTANY_TYPE * | 文字列 | （必須）使用するインスタンスのタイプ。選択したライセンスタイプによって異なります。Explore：[`Standard_DS3_v2`]、Standard：[`Standard_DS4_v2,Standard_DS13_v2,Standard_L8s_v2`]、Premium：]、[`Standard_DS5_v2`,`Standard_DS14_v2`BYOL：従量課金制用に定義されたすべてのインスタンスタイプ。サポートされるインスタンスタイプの詳細については、 Cloud Volumes ONTAP リリースノートを参照してください。デフォルトはです `Standard_DS4_v2`。 


| * AZ_CVF_LICENSE_TYPE * | 文字列 | （必須）使用するライセンスのタイプ。シングルノードの場合：[`azure-cot-explore-paygo`、 `azure-cot-standard-paygo`、 `azure-cot-premium-paygo`、、 `azure-cot-premium-byol` `capacity-paygo`]。HA:[`azure-ha-cot-standard-paygo`、 `azure-ha-cot-premium-paygo`、 `azure-ha-cot-premium-byol` `ha-capacity-paygo`]の場合。デフォルトはです `azure-cot-standard-paygo`。HAの場合は、またはを `ha-capacity-paygo`使用して、Bring Your Own Licenseタイプ（Capacity-BasedまたはFreemium）を選択します `capacity-paygo`。HAの場合は、またはを `azure-ha-cot-premium-byol`使用し `azure-cot-premium-byol`て[Bring Your Own License]タイプ[Node-Based]を選択します。 


| * AZ_CVF_NSS_ACCOUNT * | 文字列 | （必須）この Cloud Volumes ONTAP システムで使用するNetApp Support Siteのアカウント ID 。ライセンスタイプが BYOL で、 NSS アカウントが指定されていない場合、 Cloud Manager は最初の既存の NSS アカウントの使用を試みます。 


| * AZ_tenant_id * | 文字列 | （必須） Azure に登録されているアプリケーション / サービスプリンシパルのテナント ID 。 


| * AZ_application_id * | 文字列 | （必須） Azure に登録されているアプリケーション / サービスプリンシパルのアプリケーション ID 。 


| * AZ_application_key * | 文字列 | （必須） Azure に登録されているアプリケーション / サービスプリンシパルのアプリケーションキー。 
|===
--
.CVO HA の導入
--
.AzureにCVO HAを導入するための構成ファイルがTerraformに用意されています
このセクションでは、 Azure 上で CVO （ Cloud Volumes ONTAP ） HA （ハイアベイラビリティ）を導入 / 構成するためのさまざまな Terraform 構成ファイルを取り上げます。

Terraformドキュメント： https://registry.terraform.io/providers/NetApp/netapp-cloudmanager/latest/docs[]

.手順
テンプレートを実行するには、次の手順を実行します。

. リポジトリをクローニングします。
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. 目的のフォルダに移動します
+
[source, cli]
----
    cd na_cloud_volumes_automation
----
. Azure CLI にログインします（ Azure CLI がインストールされている必要があります）。
+
[source, cli]
----
    az login
----
. の変数を更新し `vars\azure_cvo_ha_deployment.tfvars`ます。
. Terraform リポジトリを初期化して、すべての前提条件をインストールし、導入の準備をします。
+
[source, cli]
----
    terraform init
----
. terraform validate コマンドを使用して、 terraform ファイルを確認します。
+
[source, cli]
----
    terraform validate
----
. 設定を事前に実行して、導入で想定されるすべての変更をプレビューします。
+
[source, cli]
----
    terraform plan -target="module.az_cvo_ha_deployment" -var-file="vars\azure_cvo_ha_deployment.tfvars"
----
. 導入を実行
+
[source, cli]
----
    terraform apply -target="module.az_cvo_ha_deployment" -var-file="vars\azure_cvo_ha_deployment.tfvars"
----


展開を削除します

[source, cli]
----
  terraform destroy
----
.降水量：
`HA Pair Instance`

HA ペアの Cloud Volumes ONTAP （ CVO ）の変数は Terraform です。

[cols="20%, 10%, 70%"]
|===
| * 名前 * | * タイプ * | * 概要 * 


| * refresh_token * | 文字列 | （必須） NetApp Cloud Manager の更新トークン。これは NetApp Cloud Central から生成できます。 


| * AZ_Connector_name * | 文字列 | （必須） Cloud Manager Connector の名前。 


| * AZ_Connector_location * | 文字列 | （必須） Cloud Manager Connector を作成する場所。 


| * AZ_Connector_subscription_id * | 文字列 | （必須） Azure サブスクリプションの ID 。 


| * AZ_Connector_company * | 文字列 | （必須）ユーザの会社名。 


| * AZ_Connector_resource_group * | 整数 | （必須）リソースが作成される Azure 内のリソースグループ。 


| * AZ_Connector_subnet_id * | 文字列 | （必須）仮想マシンのサブネットの名前です。 


| * AZ_Connector_vnet_id * | 文字列 | （必須）仮想ネットワークの名前。 


| * AZ_Connector_network_security_group_name * | 文字列 | （必須）インスタンスのセキュリティグループの名前。 


| * AZ_Connector_associate_public_IP_address * | 文字列 | （必須）仮想マシンにパブリック IP アドレスを関連付けるかどうかを指定します。 


| * AZ_Connector_account_id * | 文字列 | （必須）コネクタを関連付けるネットアップアカウントの ID 。指定しない場合、 Cloud Manager は最初のアカウントを使用します。アカウントが存在しない場合、 Cloud Manager は新しいアカウントを作成します。アカウントIDは、Cloud Managerの[Account]タブで確認できます https://cloudmanager.netapp.com[]。 


| * AZ_Connector_admin_password * | 文字列 | （必須）コネクタのパスワード。 


| * AZ_Connector_admin_username* | 文字列 | （必須）コネクタのユーザ名。 


| * AZ_CVO-NAME * | 文字列 | （必須） Cloud Volumes ONTAP 作業環境の名前。 


| * AZ_CVF_location* | 文字列 | （必須）作業環境を作成する場所。 


| * AZ_CVO-subnet_id * | 文字列 | （必須） Cloud Volumes ONTAP システムのサブネットの名前。 


| * AZ_CVO-vnet_id * | 文字列 | （必須）仮想ネットワークの名前。 


| * AZ_CVO-vnet_resource_group * | 文字列 | （必須）仮想ネットワークに関連付けられた Azure 内のリソースグループ。 


| * AZ_CVO-data_encryption_type* | 文字列 | （必須）作業環境で使用する暗号化のタイプ： `AZURE`、 `NONE`]。デフォルトはです `AZURE`。 


| * AZ_CVO-storage_type * | 文字列 | （必須）最初のデータアグリゲートのストレージのタイプ： `Premium_LRS`、 `Standard_LRS`、 `StandardSSD_LRS`]。デフォルトはです。 `Premium_LRS` 


| * AZ_CVO-svm_svm_svm_name * をクリックします | 文字列 | （必須） Cloud Volumes ONTAP の管理パスワード。 


| * AZ_CVO-workspace_id * | 文字列 | （必須） Cloud Volumes ONTAP を導入する Cloud Manager ワークスペースの ID 。指定しない場合、 Cloud Manager は最初のワークスペースを使用します。IDは、の[ワークスペース]タブから確認できます https://cloudmanager.netapp.com[]。 


| * AZ_CVF_capacity _tier * | 文字列 | （必須）最初のデータアグリゲートでデータ階層化を有効にするかどうか：[`Blob`、 `NONE`]。デフォルトはです `BLOB`。 


| * AZ_CVF_Writing _speed_state * | 文字列 | （必須）Cloud Volumes ONTAP：、 `HIGH`]の書き込み速度設定 `NORMAL`。デフォルトはです `NORMAL`。この引数は HA ペアには関係ありません。 


| * AZ_CVF_ONTAP_VERSION * | 文字列 | （必須）必要な ONTAP のバージョン。「 use_latest_version 」が true に設定されている場合は無視されます。デフォルトでは最新バージョンが使用されます。 


| * AZ_CVF_INSTANY_TYPE * | 文字列 | （必須）使用するインスタンスのタイプ。選択したライセンスタイプによって異なります。Explore：[`Standard_DS3_v2`]、Standard：[`Standard_DS4_v2, Standard_DS13_v2, Standard_L8s_v2`]、Premium： `Standard_DS14_v2`、]、[`Standard_DS5_v2`BYOL：従量課金制用に定義されたすべてのインスタンスタイプ。サポートされるインスタンスタイプの詳細については、 Cloud Volumes ONTAP リリースノートを参照してください。デフォルトはです `Standard_DS4_v2`。 


| * AZ_CVF_LICENSE_TYPE * | 文字列 | （必須）使用するライセンスのタイプ。シングルノードの場合[`azure-cot-explore-paygo, azure-cot-standard-paygo, azure-cot-premium-paygo, azure-cot-premium-byol, capacity-paygo`：]。略称はHA:][`azure-ha-cot-standard-paygo, azure-ha-cot-premium-paygo, azure-ha-cot-premium-byol, ha-capacity-paygo`。デフォルトはです `azure-cot-standard-paygo`。HAの場合は、またはを `ha-capacity-paygo`使用して、Bring Your Own Licenseタイプ（Capacity-BasedまたはFreemium）を選択します `capacity-paygo`。HAの場合は、またはを `azure-ha-cot-premium-byol`使用し `azure-cot-premium-byol`て[Bring Your Own License]タイプ[Node-Based]を選択します。 


| * AZ_CVF_NSS_ACCOUNT * | 文字列 | （必須）この Cloud Volumes ONTAP システムで使用するNetApp Support Siteのアカウント ID 。ライセンスタイプが BYOL で、 NSS アカウントが指定されていない場合、 Cloud Manager は最初の既存の NSS アカウントの使用を試みます。 


| * AZ_tenant_id * | 文字列 | （必須） Azure に登録されているアプリケーション / サービスプリンシパルのテナント ID 。 


| * AZ_application_id * | 文字列 | （必須） Azure に登録されているアプリケーション / サービスプリンシパルのアプリケーション ID 。 


| * AZ_application_key * | 文字列 | （必須） Azure に登録されているアプリケーション / サービスプリンシパルのアプリケーションキー。 
|===
--
=====
====
.GCP
[%collapsible]
====
[role="tabbed-block"]
=====
.CVO シングルノードの導入
--
.GCPにNetApp CVO（シングルノードインスタンス）を導入するためのTerraform構成ファイル
このセクションでは、 GCP （ Google Cloud Platform ）でシングルノードの NetApp CVO （ Cloud Volumes ONTAP ）を導入 / 構成するための、さまざまな Terraform 構成ファイルについて説明します。

Terraformドキュメント： https://registry.terraform.io/providers/NetApp/netapp-cloudmanager/latest/docs[]

.手順
テンプレートを実行するには、次の手順を実行します。

. リポジトリをクローニングします。
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. 目的のフォルダに移動します
+
[source, cli]
----
    cd na_cloud_volumes_automation/
----
. GCP 認証キー JSON ファイルをディレクトリに保存します。
. の変数値を更新します。 `vars/gcp_cvo_single_node_deployment.tfvar`
+

NOTE: 変数「 gCP_Connector_deploy_bool 」の値を「 true 」または「 false 」に設定することで、コネクタの配置を選択できます。

. Terraform リポジトリを初期化して、すべての前提条件をインストールし、導入の準備をします。
+
[source, cli]
----
    terraform init
----
. terraform validate コマンドを使用して、 terraform ファイルを確認します。
+
[source, cli]
----
    terraform validate
----
. 設定を事前に実行して、導入で想定されるすべての変更をプレビューします。
+
[source, cli]
----
    terraform plan -target="module.gco_single_node" -var-file="vars/gcp_cvo_single_node_deployment.tfvars"
----
. 導入を実行
+
[source, cli]
----
    terraform apply -target="module.gcp_single_node" -var-file="vars/gcp_cvo_single_node_deployment.tfvars"
----


展開を削除します

[source, cli]
----
    terraform destroy
----
.降水量：
`Connector`

NetApp GCP Connector インスタンスの CVO 導入用の Terraform 変数。

[cols="20%, 10%, 70%"]
|===
| * 名前 * | * タイプ * | * 概要 * 


| * gCP_Connector_deploy_bool * | ブール値 | （必須）コネクタの配置を確認します。 


| * GCP_Connector_name * | 文字列 | （必須） Cloud Manager Connector の名前。 


| * gCP_Connector_project_id * | 文字列 | （必須）コネクタを作成する GCP PROJECT_ID 。 


| * gCP_Connector_zone * | 文字列 | （必須）コネクタを作成する GCP ゾーン。 


| * gp_connector_company* | 文字列 | （必須）ユーザの会社名。 


| * gCP_Connector_service_account_email* | 文字列 | （必須） Connector インスタンスの SERVICE_ACCOUNT の電子メール。このサービスアカウントは、コネクタによるクラウドボリューム ONTAP の作成を許可するために使用されます。 


| * gCP_Connector_service_account_path * | 文字列 | （必須） GCP 認証に使用する service_account JSON ファイルのローカルパス。このサービスアカウントは、 GCP でコネクタを作成するために使用します。 


| * gCP_Connector_account_id * | 文字列 | （オプション）コネクタを関連付けるネットアップアカウントの ID 。指定しない場合、 Cloud Manager は最初のアカウントを使用します。アカウントが存在しない場合、 Cloud Manager は新しいアカウントを作成します。アカウントIDは、Cloud Managerの[Account]タブで確認できます https://cloudmanager.netapp.com[]。 
|===
`Single Node Instance`

GCP 上の単一の NetApp CVO インスタンスの Terraform 変数。

[cols="20%, 10%, 70%"]
|===
| * 名前 * | * タイプ * | * 概要 * 


| * GCP_CVO-NAME * | 文字列 | （必須） Cloud Volumes ONTAP 作業環境の名前。 


| * GCP_CVO-PROJECT_ID * | 文字列 | （必須） GCP プロジェクトの ID 。 


| * GCP_CVP_ZONE * | 文字列 | （必須）作業環境を作成するリージョンのゾーン。 


| * GCP_CVP_GCP_SERVICE_ACCOUNT * | 文字列 | （必須）コールドデータを Google Cloud Storage に階層化できるようにするための、 GCP_SERVICE_ACCOUNT 電子メール。 


| * GCP_CVO-svm_svm_password* をクリックします | 文字列 | （必須） Cloud Volumes ONTAP の管理パスワード。 


| * GCP_CVP_Workspace_id * | 文字列 | （オプション） Cloud Volumes ONTAP を導入する Cloud Manager ワークスペースの ID 。指定しない場合、 Cloud Manager は最初のワークスペースを使用します。IDは、の[ワークスペース]タブから確認できます https://cloudmanager.netapp.com[]。 


| * GCP_CVP_LICENSE_TYPE * | 文字列 | （任意）使用するライセンスのタイプ。シングルノードの場合： [ 容量 - 給与 ] 、 [ GCP - COT - EXPLORTe-paygo ] 、 [GCP - COT - standard-paygo] 、 [GCP - COT - Premium-paygo] 、 [GCP - COT - Premium-BYOL ] 、 HA の場合： [ HA キャパシティ - ペイゴー ] 、 [ GCP - HA - ベッド - 探検 - ペイゴー ] 、 [GCP - HA - ベビーベッド - スタンダード - ペイゴー ] 、 [GCP - HA - ベビーベッド - プレミアム - ペイゴー ] 、 [GCP - HA - ベビーベッド - プレミアム - BYOL ] 。デフォルトは、単一ノードの場合は「 capacity-paygo 」、 HA の場合は「 ha-capacity-paygo 」です。 


| * GCP_CVP_capacity package_name * | 文字列 | （オプション）容量パッケージの名前： ['Essential','Professional','Freemium'] 。デフォルトは「 Essential 」です。 
|===
--
.CVO HA の導入
--
.NetApp CVO（HAペア）をGCPに導入するための構成ファイルをTerraformしています
このセクションでは、 GCP （ Google Cloud Platform ）のハイアベイラビリティペアで NetApp CVO （ Cloud Volumes ONTAP ）を導入 / 構成するための、さまざまな Terraform 構成ファイルについて説明します。

Terraformドキュメント： https://registry.terraform.io/providers/NetApp/netapp-cloudmanager/latest/docs[]

.手順
テンプレートを実行するには、次の手順を実行します。

. リポジトリをクローニングします。
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. 目的のフォルダに移動します
+
[source, cli]
----
    cd na_cloud_volumes_automation/
----
. GCP 認証キー JSON ファイルをディレクトリに保存します。
. の変数値を更新し `vars/gcp_cvo_ha_deployment.tfvars`ます。
+

NOTE: 変数「 gCP_Connector_deploy_bool 」の値を「 true 」または「 false 」に設定することで、コネクタの配置を選択できます。

. Terraform リポジトリを初期化して、すべての前提条件をインストールし、導入の準備をします。
+
[source, cli]
----
      terraform init
----
. terraform validate コマンドを使用して、 terraform ファイルを確認します。
+
[source, cli]
----
    terraform validate
----
. 設定を事前に実行して、導入で想定されるすべての変更をプレビューします。
+
[source, cli]
----
    terraform plan -target="module.gcp_ha" -var-file="vars/gcp_cvo_ha_deployment.tfvars"
----
. 導入を実行
+
[source, cli]
----
    terraform apply -target="module.gcp_ha" -var-file="vars/gcp_cvo_ha_deployment.tfvars"
----


展開を削除します

[source, cli]
----
    terraform destroy
----
.降水量：
`Connector`

NetApp GCP Connector インスタンスの CVO 導入用の Terraform 変数。

[cols="20%, 10%, 70%"]
|===
| * 名前 * | * タイプ * | * 概要 * 


| * gCP_Connector_deploy_bool * | ブール値 | （必須）コネクタの配置を確認します。 


| * GCP_Connector_name * | 文字列 | （必須） Cloud Manager Connector の名前。 


| * gCP_Connector_project_id * | 文字列 | （必須）コネクタを作成する GCP PROJECT_ID 。 


| * gCP_Connector_zone * | 文字列 | （必須）コネクタを作成する GCP ゾーン。 


| * gp_connector_company* | 文字列 | （必須）ユーザの会社名。 


| * gCP_Connector_service_account_email* | 文字列 | （必須） Connector インスタンスの SERVICE_ACCOUNT の電子メール。このサービスアカウントは、コネクタによるクラウドボリューム ONTAP の作成を許可するために使用されます。 


| * gCP_Connector_service_account_path * | 文字列 | （必須） GCP 認証に使用する service_account JSON ファイルのローカルパス。このサービスアカウントは、 GCP でコネクタを作成するために使用します。 


| * gCP_Connector_account_id * | 文字列 | （オプション）コネクタを関連付けるネットアップアカウントの ID 。指定しない場合、 Cloud Manager は最初のアカウントを使用します。アカウントが存在しない場合、 Cloud Manager は新しいアカウントを作成します。アカウントIDは、Cloud Managerの[Account]タブで確認できます https://cloudmanager.netapp.com[]。 
|===
`HA Pair`

GCP の HA ペアの NetApp CVO インスタンスの Terraform 変数。

[cols="20%, 10%, 70%"]
|===
| * 名前 * | * タイプ * | * 概要 * 


| * GCP_CVP_is_HA * | ブール値 | （オプション）作業環境が HA ペアであるかどうかを示します（ [true 、 false] ）。デフォルトはfalseです。 


| * GCP_CVO-NAME * | 文字列 | （必須） Cloud Volumes ONTAP 作業環境の名前。 


| * GCP_CVO-PROJECT_ID * | 文字列 | （必須） GCP プロジェクトの ID 。 


| * GCP_CVP_ZONE * | 文字列 | （必須）作業環境を作成するリージョンのゾーン。 


| * gcp_cvo_node1_zone* | 文字列 | （オプション）ノード 1 のゾーン。 


| * gcp_cvo_node2_zone* | 文字列 | （オプション）ノード 2 のゾーン。 


| * GCP_CVP_mediator_zone * | 文字列 | （オプション）メディエーター用のゾーン。 


| * GCP_CVP_vPC_id * | 文字列 | （オプション） VPC の名前。 


| * GCP_CVP_subnet_id * | 文字列 | （オプション） Cloud Volumes ONTAP のサブネットの名前。デフォルトは「 default 」です。 


| * gcp_cvo_vpc0_node_and_data_connectivity* | 文字列 | （オプション） NIC 1 の VPC パス。ノードとデータの接続に必要です。共有 VPC を使用する場合は、 netwrok_project_id を指定する必要があります。 


| * gcp_cvo_vpc1_cluster_connectivity* | 文字列 | （オプション） NIC 2 の VPC パス。クラスタ接続に必要です。 


| * gcp_cvo_vpc2_ha_connectivity* | 文字列 | （オプション） HA 接続に必要な NIC 3 の VPC パス。 


| * gcp_cvo_vpc3_data_replication* | 文字列 | （オプション）データレプリケーションに必要な NIC4 の VPC パス。 


| * gcp_cvo_subnet0_node_and_data_connectivity* | 文字列 | （任意）ノードおよびデータ接続に必要な NIC1 のサブネットパス。共有 VPC を使用する場合は、 netwrok_project_id を指定する必要があります。 


| * gcp_cvo_subnet1_cluster_connectivity* | 文字列 | （オプション）クラスタ接続に必要な NIC 2 のサブネット・パス 


| * gcp_cvo_subnet2_ha_connectivity* | 文字列 | （任意） HA 接続に必要な NIC 3 のサブネットパス。 


| * gcp_cvo_subnet3_data_replication* | 文字列 | （任意）データ複製に必要な NIC4 のサブネット・パス 


| * GCP_CVP_GCP_SERVICE_ACCOUNT * | 文字列 | （必須）コールドデータを Google Cloud Storage に階層化できるようにするための、 GCP_SERVICE_ACCOUNT 電子メール。 


| * GCP_CVO-svm_svm_password* をクリックします | 文字列 | （必須） Cloud Volumes ONTAP の管理パスワード。 


| * GCP_CVP_Workspace_id * | 文字列 | （オプション） Cloud Volumes ONTAP を導入する Cloud Manager ワークスペースの ID 。指定しない場合、 Cloud Manager は最初のワークスペースを使用します。IDは、の[ワークスペース]タブから確認できます https://cloudmanager.netapp.com[]。 


| * GCP_CVP_LICENSE_TYPE * | 文字列 | （任意）使用するライセンスのタイプ。シングルノードの場合： [ 容量 - 給与 ] 、 [ GCP - COT - EXPLORTe-paygo ] 、 [GCP - COT - standard-paygo] 、 [GCP - COT - Premium-paygo] 、 [GCP - COT - Premium-BYOL ] 、 HA の場合： [ HA キャパシティ - ペイゴー ] 、 [ GCP - HA - ベッド - 探検 - ペイゴー ] 、 [GCP - HA - ベビーベッド - スタンダード - ペイゴー ] 、 [GCP - HA - ベビーベッド - プレミアム - ペイゴー ] 、 [GCP - HA - ベビーベッド - プレミアム - BYOL ] 。デフォルトは、単一ノードの場合は「 capacity-paygo 」、 HA の場合は「 ha-capacity-paygo 」です。 


| * GCP_CVP_capacity package_name * | 文字列 | （オプション）容量パッケージの名前： ['Essential','Professional','Freemium'] 。デフォルトは「 Essential 」です。 


| * GCP_CVP_GCP_volume_size * | 文字列 | （オプション）最初のデータアグリゲートの GCP ボリュームサイズ。GB の場合、単位は [100 または 500] です。TB の場合、単位は [1,2,4,8] です。デフォルトは「 1 」です。 


| * GCP_CVP_GCP_volume_size_unit * | 文字列 | （オプション） ['GB' または 'TB'] 。デフォルトは「 TB 」です。 
|===
--
.NetAppボリューム
--
.GCPにNetApp Volumeを導入するためのTerraform構成ファイル
このセクションでは、GCP（Google Cloud Platform）にNetApp Volume（Google Cloud NetApp Volumes）ボリュームを導入/設定するためのさまざまなTerraform構成ファイルについて説明します。

Terraformドキュメント： https://registry.terraform.io/providers/NetApp/netapp-gcp/latest/docs[]

.手順
テンプレートを実行するには、次の手順を実行します。

. リポジトリをクローニングします。
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. 目的のフォルダに移動します
+
[source, cli]
----
    cd na_cloud_volumes_automation/
----
. GCP 認証キー JSON ファイルをディレクトリに保存します。
. の変数値を更新し `vars/gcp_cvs_volume.tfvars`ます。
. Terraform リポジトリを初期化して、すべての前提条件をインストールし、導入の準備をします。
+
[source, cli]
----
      terraform init
----
. terraform validate コマンドを使用して、 terraform ファイルを確認します。
+
[source, cli]
----
    terraform validate
----
. 設定を事前に実行して、導入で想定されるすべての変更をプレビューします。
+
[source, cli]
----
    terraform plan -target="module.gcp_cvs_volume" -var-file="vars/gcp_cvs_volume.tfvars"
----
. 導入を実行
+
[source, cli]
----
    terraform apply -target="module.gcp_cvs_volume" -var-file="vars/gcp_cvs_volume.tfvars"
----


展開を削除します

[source, cli]
----
    terraform destroy
----
.降水量：
`NetApp Volumes Volume`

NetApp GCP NetApp VolumeのTerraform変数。

[cols="20%, 10%, 70%"]
|===
| * 名前 * | * タイプ * | * 概要 * 


| * gcp_cvs_name * | 文字列 | （必須）NetApp Volumeボリュームの名前。 


| * gcp_cvs_project_id * | 文字列 | （必須）NetAppボリュームを作成するGCP project_id。 


| * gcp_cvs_gcp_service_account_path * | 文字列 | （必須） GCP 認証に使用する service_account JSON ファイルのローカルパス。このサービスアカウントは、GCPでNetAppボリュームを作成するために使用します。 


| * gcp_cvs_region * | 文字列 | （必須）NetAppボリュームを作成するGCPゾーン。 


| * gcp_cvs_network * | 文字列 | （必須）ボリュームのネットワーク VPC 。 


| * gcp_cvs_size * | 整数 | （必須）ボリュームのサイズは、 1024~102400 で（ GiB 単位）。 


| * gcp_cvs_volume_path * | 文字列 | （オプション）ボリュームのボリュームパスの名前。 


| * gcp_cvs_protocol_types * | 文字列 | （必須）ボリュームの protocol_type 。NFS の場合は「 NFSv3 」または「 NFSv4 」を、 SMB の場合は「 CIFS 」または「 MB 」を使用します。 
|===
--
=====
====