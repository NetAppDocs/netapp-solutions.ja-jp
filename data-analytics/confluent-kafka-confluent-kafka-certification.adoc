---
sidebar: sidebar 
permalink: data-analytics/confluent-kafka-confluent-kafka-certification.html 
keywords: certification, setup, configuration, benchmark 
summary: また、 NetApp StorageGRID の階層型ストレージとして Kafka を使用して、 ConFluent Platform の認定を受けています。 
---
= Kafka 認定資格の競合があります
:hardbreaks:
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/


link:confluent-kafka-technology-overview.html["前のページ：テクノロジの概要"]

また、 NetApp StorageGRID の階層型ストレージとして Kafka を使用して、 ConFluent Platform の認定を受けています。階層型ストレージでは ' データ処理とストレージ管理が分離されるため ' オペレーションの負荷とコストを削減し ' 計算要件に基づいてブローカーを拡張できます階層化ストレージは、対費用効果の高いオブジェクトストレージにウォームデータを送信します。ネットアップと流暢なチームがこの認定を共に行い、認定に必要なテストケースを実施しました。



== 矛盾する Kafka の設定

認定には次のセットアップを使用しました。

この認定では、 3 台の動物園と 5 台のブローカーを使用し、 256GB の RAM と 16 個の CPU を搭載した 5 台のツールサーバを使用しました。ネットアップストレージについては、 SG6024 のある SG1000 ロードバランサで StorageGRID を使用しました。ストレージとブローカーは、 100GbE 接続経由で接続されています。

次の図は、矛盾する Kafka 認定に使用される構成のネットワークトポロジを示しています。

image:confluent-kafka-image7.png["エラー：グラフィックイメージがありません"]

Kafka 要求を Kafka ブローカーに送信するアプリケーションクライアントとして機能するツールサーバです。



== 競合する階層型ストレージ構成

階層化ストレージの構成には、 Kafka に次のパラメータが必要です。

....
Confluent.tier.archiver.num.threads=16
confluent.tier.fetcher.num.threads=32
confluent.tier.enable=true
confluent.tier.feature=true
confluent.tier.backend=S3
confluent.tier.s3.bucket=kafkasgdbucket1-2
confluent.tier.s3.region=us-west-2
confluent.tier.s3.cred.file.path=/data/kafka/.ssh/credentials
confluent.tier.s3.aws.endpoint.override=http://kafkasgd.rtpppe.netapp.com:10444/
confluent.tier.s3.force.path.style.access=true
....
認定には HTTP プロトコルに StorageGRID を使用しましたが、 HTTPS も使用できます。アクセスキーとシークレットキーは、「 confliclus.tir.s3.cred.file.path 」パラメータで指定したファイル名に格納されます。



== ネットアップストレージコントローラ– StorageGRID

StorageGRID では、認定用にシングルサイト構成を設定しました。

image:confluent-kafka-image8.png["エラー：グラフィックイメージがありません"]



== 認定試験

認定試験は、以下の 5 つのケースで終了しました。最初の 2 つは機能テストで、残りの 3 つはパフォーマンステストです。



=== オブジェクトストアの正確性テスト

このテストでは、 API 呼び出しを使用して関連付けられたストレージに使用されるオブジェクトストアで、 GET 、 PUT 、 DELETE などの基本的な処理を実行します。



=== 階層化機能の正確性テスト

このテストでは、オブジェクトストレージのエンドツーエンド機能をチェックします。トピックを作成し、新たに作成されたトピックにイベントストリームを生成し、ブローカーがオブジェクトストレージにセグメントをアーカイブするのを待機し、イベントストリームを消費して、消費されたストリームが生成されたストリームと一致するかどうかを検証します。このテストは、オブジェクトストアフォールト挿入の有無にかかわらず実施しました。StorageGRID のいずれかのノードでサービスマネージャサービスを停止し、エンドツーエンド機能がオブジェクトストレージで機能することを検証することで、ノード障害をシミュレートしました。



=== ティアフェッチベンチマーク

このテストでは、階層型オブジェクトストレージの読み取りパフォーマンスを検証し、ベンチマークによって生成されたセグメントからの負荷が大きい範囲での読み取り要求のフェッチをチェックしました。このベンチマークでは、 Conluent 社は階層フェッチ要求に対応するカスタムクライアントを開発しました。



=== ワークロードジェネレータを消費

このテストでは、セグメントをアーカイブすることにより、オブジェクトストアへの書き込みワークロードを間接的に生成しました。コンシューマグループがセグメントを取得すると、読み取りワークロード（セグメント読み取り）がオブジェクトストレージから生成されました。このワークロードは TOCC スクリプトによって生成されました。このテストでは、並列スレッドでのオブジェクトストレージの読み取りと書き込みのパフォーマンスをチェックしました。階層化機能の正確性テストの場合と同様に、オブジェクトストアフォールト挿入を使用したテストと使用しなかったテストを実施しました。



=== 保持ワークロードジェネレータ

このテストでは、トピックの保持ワークロードが多い場合のオブジェクトストレージの削除パフォーマンスを確認しました。保存ワークロードは、テストトピックと並行して大量のメッセージを生成する TOCC スクリプトを使用して生成されました。テストトピックでは、サイズベースおよび時間ベースの強力な保持設定を使用してイベントストリームをオブジェクトストアから継続的にパージするように設定しました。その後、セグメントがアーカイブされました。その結果、ブローカーによるオブジェクトストレージの削除や、オブジェクトストアの削除処理のパフォーマンス収集が行われ、大量の削除が発生していました。

link:confluent-kafka-performance-tests-with-scalability.html["次のステップ：拡張性を備えたパフォーマンステスト"]
