---
sidebar: sidebar 
permalink: infra/rhv-3._deploy_element_storage_system.html 
keywords: Storage setup, SolidFire, Element Cluster, Bond1G 
summary:  
---
= 3. HCI ストレージノードに Element ストレージシステムを導入します。 NetApp HCI with RHV
:hardbreaks:
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/




=== Basic NetApp Element Storage Setup の略

NetApp Element クラスタセットアップは、スタンドアロンの NetApp SolidFire ストレージセットアップと同様の方法で実行します。以下の手順は、ノードがラックに設置されてケーブル接続され、コンソールを使用して各ノードに IPMI ポートが設定されたあとに開始されます。ストレージクラスタをセットアップするには、次の手順を実行します。

. クラスタ内のストレージノードのアウトオブバンド管理コンソールにアクセスし、デフォルトのクレデンシャルである Admin/Admin を使用してログインします。
+
image:redhat_virtualization_image5.png["エラー：グラフィックイメージがありません"]

. 画面の中央にある Remote Console Preview 画像をクリックして、 Java Web Start で起動された JNLP ファイルをダウンロードします。これにより、システムへの対話型コンソールが起動します。
+
image:redhat_virtualization_image6.JPG["エラー：グラフィックイメージがありません"]

. Network > Network Config > Bond1G （ Management ）に移動し、 Bond1G インターフェイスを設定します。Bond1G インターフェイスは ActivePassive ボンディングモードであり、 IP 、ネットマスク、ゲートウェイが静的に設定されている必要があります。その VLAN は、環境用に定義された IB 管理ネットワークおよび DNS サーバに対応している必要があります。[OK] をクリックします。
+
image:redhat_virtualization_image7.png["エラー：グラフィックイメージがありません"]

. Bond10G （ストレージ）を選択し、 Bond10G インターフェイスを設定します。ボンド 10G インターフェイスは、ジャンボフレームを有効にするために、 LACP ボンディングモードで MTU を 9000 に設定する必要があります。定義したストレージ VLAN で使用可能な IP アドレスとネットマスクを割り当てる必要があります。詳細を入力したら、 [OK] をクリックします。
+
image:redhat_virtualization_image8.png["エラー：グラフィックイメージがありません"]

. 初期画面に戻り、 [ クラスタ設定 ] に移動して、 [ 設定の変更 ] をクリックします。任意のクラスタ名を入力し、 OK をクリックします。
+
image:redhat_virtualization_image9.png["エラー：グラフィックイメージがありません"]

. すべての HCI ストレージノードについて、手順 1~5 を繰り返します。
. すべてのストレージノードを設定したら、 Web ブラウザでいずれかのストレージノードの IB 管理 IP にログインします。新しいクラスタの作成ダイアログが表示され、セットアップページが表示されます。このページでは、管理 VIP 、ストレージ VIP 、および Element クラスタのその他の詳細を設定します。前の手順で設定したストレージノードが自動的に検出されます。クラスタに不要なノードがチェックされていないことを確認してから、処理を進めてください。エンドユーザライセンス契約に同意し、 Create New Cluster をクリックしてクラスタの作成プロセスを開始します。クラスタが起動するまでに数分かかります。
+

NOTE: IB 管理アドレスを指定している場合、ポート 442 に自動的に接続し、 NDE セットアップウィザードが起動することもあります。この場合は、 URL からポート仕様を削除して、ページに再接続してください。

+
image:redhat_virtualization_image10.png["エラー：グラフィックイメージがありません"]

. クラスタが作成されると、割り当てられた MVIP アドレスで使用可能な Element クラスタ管理インターフェイスにリダイレクトされます。前の手順で入力したクレデンシャルでログインします。
. ログインすると、使用可能なドライブ数がクラスタで自動的に検出され、すべてのドライブの追加の確認が求められます。Add Drives をクリックして、すべてのドライブを一度に追加します。
. Element クラスタは使用できる状態です。Cluster > Nodes に移動し、 4 つのノードすべてがアクティブドライブで正常な状態であることを確認します。


image:redhat_virtualization_image11.png["エラー：グラフィックイメージがありません"]



=== RHV 導入をサポートするための Element Storage Configuration

NetApp HCI for Red Hat Virtualization 解決策では、 NetApp Element ストレージシステムを使用して、共有ストレージドメインに対する RHV の要件に対応するバックエンドストレージを提供します。RHV 導入の自己ホスト型エンジンアーキテクチャには、最低 2 つのストレージドメイン（ホスト型エンジンストレージドメイン用とゲスト VM データドメイン用）が必要です。

導入のこの作業では、アカウント、適切なサイズのボリューム、および関連するイニシエータを 2 つ設定する必要があります。次に、これらのコンポーネントをアクセスグループにマッピングして、 RHV ホストが使用するブロックボリュームをマッピングできるようにします。これらの各操作は、 Web ユーザインターフェイスまたは Element システムの標準の API を使用して実行できます。この導入ガイドでは、 GUI を使用して手順を説明します。

Web ブラウザを使用して、 MVIP アドレスで NetApp Element クラスタ GUI にログインします。管理タブに移動し、次の手順を実行します。

. アカウントを作成するには、 [ アカウント ] サブタブに移動し、 [ アカウントの作成 ] をクリックします。任意の名前を入力し、「アカウントを作成」をクリックします。
+
image:redhat_virtualization_image12.png["エラー：グラフィックイメージがありません"]

. ボリュームを作成するには、次の手順を実行します。
+
.. Volumes （ボリューム）サブタブに移動し、 Create Volume （ボリュームの作成）をクリックします。
.. 自己ホスト型エンジンストレージドメインのボリュームを作成するには、任意の名前を入力し、最後の手順で作成したアカウントを選択し、自己ホスト型エンジンストレージドメインのボリュームサイズを入力し、 QoS 設定を構成して、 Create Volume （ボリュームの作成）をクリックします。
+
image:redhat_virtualization_image13.png["エラー：グラフィックイメージがありません"]

+
ホストされているエンジンボリュームの最小サイズは 75GB です。この設計では、必要に応じて、将来のエクステントを RHV-M VM に追加できるようにスペースを追加しました。

.. ゲスト VM データストレージドメインのボリュームを作成するには、任意の名前を入力し、最後の手順で作成したアカウントを選択し、データストレージドメインのボリュームのサイズを入力し、 QoS 設定を構成して、 Create Volume （ボリュームの作成）をクリックします。
+
image:redhat_virtualization_image14.png["エラー：グラフィックイメージがありません"]

+
データドメインのサイズは、環境で実行されている VM の種類と、 VM をサポートするために必要なスペースによって異なります。環境のニーズに合わせてこのボリュームのサイズを調整してください。



. イニシエータを作成するには、次の手順を実行します。
+
.. イニシエータサブタブに移動し、イニシエータの作成をクリックします。
.. [Bulk Create Initiators] オプションボタンを選択し、両方の RHV-H ノードのイニシエータの詳細をカンマで区切って入力します。次に、 Add Initiators （イニシエータの追加）をクリックし、イニシエータのエイリアスを入力して、チェックマークボタンをクリックします。詳細を確認し、イニシエータの作成をクリックします。
+
image:redhat_virtualization_image15.png["エラー：グラフィックイメージがありません"]



. アクセスグループを作成するには、次の手順を実行します。
+
.. [ アクセスグループ ] サブタブに移動し、 [ アクセスグループの作成 ] をクリックします。
.. 任意の名前を入力し、前の手順で作成した両方の RHV-H ノードのイニシエータを選択してボリュームを選択し、 Create Access Group （アクセスグループの作成）をクリックします。
+
image:redhat_virtualization_image16.png["エラー：グラフィックイメージがありません"]





link:rhv-4._deploy_rhv-h_hypervisor.html["次へ： 4.HCI コンピューティングノードに RHV-H ハイパーバイザーを導入する"]
